
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python package for reading Nikon ND2 files">
      
      
        <meta name="author" content="Talley Lambert">
      
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="index_py/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>nd2 - nd2</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
      
      
    
  
  
  <style>:root{--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M9.6%202.279a.426.426%200%200%201%20.8%200l.407%201.112a6.39%206.39%200%200%200%203.802%203.802l1.112.407a.426.426%200%200%201%200%20.8l-1.112.407a6.39%206.39%200%200%200-3.802%203.802l-.407%201.112a.426.426%200%200%201-.8%200l-.407-1.112a6.39%206.39%200%200%200-3.802-3.802L4.279%208.4a.426.426%200%200%201%200-.8l1.112-.407a6.39%206.39%200%200%200%203.802-3.802zm-4.267%208.837a.178.178%200%200%201%20.334%200l.169.464a2.66%202.66%200%200%200%201.584%201.584l.464.169a.178.178%200%200%201%200%20.334l-.464.169a2.66%202.66%200%200%200-1.584%201.584l-.169.464a.178.178%200%200%201-.334%200l-.169-.464a2.66%202.66%200%200%200-1.584-1.584l-.464-.169a.178.178%200%200%201%200-.334l.464-.169a2.66%202.66%200%200%200%201.584-1.584zM2.8.14a.213.213%200%200%201%20.4%200l.203.556a3.2%203.2%200%200%200%201.901%201.901l.556.203a.213.213%200%200%201%200%20.4l-.556.203a3.2%203.2%200%200%200-1.901%201.901L3.2%205.86a.213.213%200%200%201-.4%200l-.203-.556A3.2%203.2%200%200%200%20.696%203.403L.14%203.2a.213.213%200%200%201%200-.4l.556-.203A3.2%203.2%200%200%200%202.597.696z%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../styles/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="yellow" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nd2" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="nd2" class="md-header__button md-logo" aria-label="nd2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.73 15-3.9 6.76a9.984 9.984 0 0 0 8.49-2.01l-3.66-6.35M2.46 15c.92 2.92 3.15 5.26 5.99 6.34L12.12 15m-3.58-3-3.9-6.75A9.86 9.86 0 0 0 2 12c0 .68.07 1.35.2 2h7.49m12.11-4h-7.49l.29.5 4.76 8.25A9.93 9.93 0 0 0 22 12c0-.69-.07-1.36-.2-2m-.26-1c-.92-2.93-3.15-5.26-5.99-6.34L11.88 9M9.4 10.5l4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.84-6.32 2.25l3.66 6.35z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            nd2
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              nd2
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="yellow" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="yellow"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tlambert03/nd2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tlambert03/nd2
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="nd2" class="md-nav__button md-logo" aria-label="nd2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.73 15-3.9 6.76a9.984 9.984 0 0 0 8.49-2.01l-3.66-6.35M2.46 15c.92 2.92 3.15 5.26 5.99 6.34L12.12 15m-3.58-3-3.9-6.75A9.86 9.86 0 0 0 2 12c0 .68.07 1.35.2 2h7.49m12.11-4h-7.49l.29.5 4.76 8.25A9.93 9.93 0 0 0 22 12c0-.69-.07-1.36-.2-2m-.26-1c-.92-2.93-3.15-5.26-5.99-6.34L11.88 9M9.4 10.5l4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.84-6.32 2.25l3.66 6.35z"/></svg>

    </a>
    nd2
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tlambert03/nd2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    tlambert03/nd2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  
  <span class="md-ellipsis">
    
  
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>nd2
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>nd2
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index_py/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="structures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    structures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tiff/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tiff
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="jobs/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>jobs
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_1_5" id="__nav_2_1_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code>jobs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="jobs/types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nd2.BinaryLayer" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BinaryLayer
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BinaryLayer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.BinaryLayer.frame_shape" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;frame_shape
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.BinaryLayer.asarray" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;asarray
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nd2.BinaryLayers" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BinaryLayers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BinaryLayers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.BinaryLayers.asarray" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;asarray
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nd2.ND2File" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ND2File
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ND2File">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File(path)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File(validate_frames)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;validate_frames
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File(search_window)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;search_window
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.binary_data" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;binary_data
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.closed" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;closed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.components_per_channel" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;components_per_channel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.custom_data" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;custom_data
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.dtype" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;dtype
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.experiment" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;experiment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.is_legacy" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;is_legacy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.is_rgb" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;is_rgb
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.loop_indices" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;loop_indices
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;metadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.nbytes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;nbytes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.ndim" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;ndim
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.rois" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;rois
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.shape" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;shape
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.size" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;size
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.sizes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;sizes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.text_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;text_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.version" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.asarray" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;asarray
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" asarray">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.asarray(position)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;position
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.close" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;close
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.events" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;events
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.events(orient)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;orient
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.events(null_value)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;null_value
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.frame_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;frame_metadata
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" frame_metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.frame_metadata(seq_index)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;seq_index
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.is_supported_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_supported_file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.jobs" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;jobs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.ome_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;ome_metadata
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ome_metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.ome_metadata(include_unstructured)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;include_unstructured
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.ome_metadata(tiff_file_name)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;tiff_file_name
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.open" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;open
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.read_frame" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;read_frame
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.to_dask" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_dask
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" to_dask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.to_dask(wrapper)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;wrapper
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.to_dask(copy)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;copy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.to_xarray" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_xarray
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" to_xarray">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.to_xarray(delayed)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;delayed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.to_xarray(squeeze)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;squeeze
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.to_xarray(position)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;position
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.to_xarray(copy)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;copy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.unstructured_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unstructured_metadata
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" unstructured_metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.unstructured_metadata(strip_prefix)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;strip_prefix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.unstructured_metadata(include)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;include
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.unstructured_metadata(exclude)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;exclude
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.voxel_size" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;voxel_size
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" voxel_size">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.voxel_size(channel)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;channel
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;write_ome_zarr
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" write_ome_zarr">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(dest)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;dest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(chunk_shape)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;chunk_shape
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(shard_shape)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;shard_shape
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(backend)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;backend
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(progress)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;progress
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(position)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;position
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(force_series)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;force_series
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(include_all_metadata)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;include_all_metadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(include_labels)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;include_labels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(version)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_ome_zarr(overwrite)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;overwrite
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_tiff" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;write_tiff
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" write_tiff">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_tiff(dest)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;dest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_tiff(include_unstructured_metadata)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;include_unstructured_metadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_tiff(progress)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;progress
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_tiff(on_frame)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;on_frame
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.ND2File.write_tiff(modify_ome)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;modify_ome
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nd2.imread" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;imread
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" imread">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.imread(file)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.imread(dask)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;dask
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.imread(xarray)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;xarray
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.imread(validate_frames)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;validate_frames
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nd2.is_legacy" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;is_legacy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" is_legacy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.is_legacy(path)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;path
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nd2.is_supported_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;is_supported_file
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" is_supported_file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.is_supported_file(path)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.is_supported_file(open_)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;open_
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nd2.nd2_to_tiff" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;nd2_to_tiff
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" nd2_to_tiff">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.nd2_to_tiff(source)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;source
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.nd2_to_tiff(dest)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;dest
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.nd2_to_tiff(include_unstructured_metadata)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;include_unstructured_metadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.nd2_to_tiff(progress)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;progress
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.nd2_to_tiff(on_frame)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;on_frame
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.nd2_to_tiff(modify_ome)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;modify_ome
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nd2.rescue_nd2" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;rescue_nd2
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" rescue_nd2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nd2.rescue_nd2(handle)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;handle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.rescue_nd2(frame_shape)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;frame_shape
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.rescue_nd2(dtype)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;dtype
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.rescue_nd2(max_iters)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;max_iters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.rescue_nd2(verbose)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;verbose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nd2.rescue_nd2(chunk_start)" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;chunk_start
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<div class="doc doc-object doc-module">



<h1 id="nd2" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">nd2</span>


<a href="#nd2" class="headerlink" title="Permanent link">&para;</a></h1>

    <div class="doc doc-contents first">

        <p>nd2: A Python library for reading and writing ND2 files.</p>






<p><span class="doc-section-title">Modules:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            nd2.index" href="index_py/#nd2.index">index</a></code></b>
          –
          <div class="doc-md-description">
            <p>Index ND2 files and print the results as a table.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            nd2.jobs" href="jobs/#nd2.jobs">jobs</a></code></b>
          –
          <div class="doc-md-description">
            <p>JOBS support.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            nd2.structures" href="structures/#nd2.structures">structures</a></code></b>
          –
          <div class="doc-md-description">
            <p>Dataclasses and other structures used for metadata.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            nd2.tiff" href="tiff/#nd2.tiff">tiff</a></code></b>
          –
          <div class="doc-md-description">
            <p>Functions for converting .nd2 to .tiff files.</p>
          </div>
        </li>
    </ul>






<p><span class="doc-section-title">Classes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            BinaryLayer


  
      dataclass
   (nd2.BinaryLayer)" href="#nd2.BinaryLayer">BinaryLayer</a></code></b>
          –
          <div class="doc-md-description">
            <p>Wrapper for data from a single binary layer in an <a class="autorefs autorefs-internal" title="            ND2File" href="#nd2.ND2File"><code>nd2.ND2File</code></a>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            BinaryLayers (nd2.BinaryLayers)" href="#nd2.BinaryLayers">BinaryLayers</a></code></b>
          –
          <div class="doc-md-description">
            <p>Sequence of Binary Layers found in an ND2 file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            ND2File (nd2.ND2File)" href="#nd2.ND2File">ND2File</a></code></b>
          –
          <div class="doc-md-description">
            <p>Main objecting for opening and extracting data from an nd2 file.</p>
          </div>
        </li>
    </ul>




<p><span class="doc-section-title">Functions:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            imread (nd2.imread)" href="#nd2.imread">imread</a></code></b>
            –
            <div class="doc-md-description">
              <p>Open <code>file</code>, return requested array type, and close <code>file</code>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            is_legacy (nd2.is_legacy)" href="#nd2.is_legacy">is_legacy</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return <code>True</code> if <code>path</code> is a legacy ND2 file.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            is_supported_file (nd2.is_supported_file)" href="#nd2.is_supported_file">is_supported_file</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return <code>True</code> if <code>path</code> can be opened as an nd2 file.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            nd2_to_tiff (nd2.nd2_to_tiff)" href="#nd2.nd2_to_tiff">nd2_to_tiff</a></code></b>
            –
            <div class="doc-md-description">
              <p>Export an ND2 file to an (OME)-TIFF file.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            rescue_nd2 (nd2.rescue_nd2)" href="#nd2.rescue_nd2">rescue_nd2</a></code></b>
            –
            <div class="doc-md-description">
              <p>Iterator that yields all discovered frames in a file handle.</p>
            </div>
          </li>
    </ul>





<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="nd2.BinaryLayer" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BinaryLayer</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#nd2.BinaryLayer" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">BinaryLayer</span><span class="p">(</span>
    <span class="n"><span title="nd2.BinaryLayer(data)">data</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span>
    <span class="n"><span title="nd2.BinaryLayer(name)">name</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><span title="nd2.BinaryLayer(file_tag)">file_tag</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><span title="nd2.BinaryLayer(comp_name)">comp_name</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="nd2.BinaryLayer(comp_order)">comp_order</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="nd2.BinaryLayer(color)">color</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="nd2.BinaryLayer(color_mode)">color_mode</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="nd2.BinaryLayer(state)">state</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="nd2.BinaryLayer(layer_id)">layer_id</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="nd2.BinaryLayer(coordinate_shape)">coordinate_shape</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Wrapper for data from a single binary layer in an <a class="autorefs autorefs-internal" title="            ND2File" href="#nd2.ND2File"><code>nd2.ND2File</code></a>.</p>
<p>A "layer" is a set of binary data that can be associated with a
specific component in an ND2 file, such as a single channel.</p>
<p>This object behaves like a <code>list[numpy.ndarray] | None</code>.
It will have a length matching the number of frames in the file, with <code>None</code> for
any frames that lack binary data.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><span title="nd2.BinaryLayer.data">data</span></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>] | None</code>)
          –
          <div class="doc-md-description">
            <p>The data for each frame. If a frame has no binary data, the value
will be None.  Data will have the same length as the number of sequences
in the file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="nd2.BinaryLayer.name">name</span></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The name of the binary layer.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="nd2.BinaryLayer.comp_name">comp_name</span></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The name of the associated component, if Any.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="nd2.BinaryLayer.comp_order">comp_order</span></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>The order of the associated component, if Any.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="nd2.BinaryLayer.color">color</span></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>The color of the binary layer.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="nd2.BinaryLayer.color_mode">color_mode</span></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>The color mode of the binary layer.  I believe this is related to how colors
are chosen in NIS-Elements software.  Where "0" is direct color (i.e. use,
the color value), "8" is color by 3D ... and I'm not sure about the rest :)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="nd2.BinaryLayer.state">state</span></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>The state of the binary layer. (meaning still unclear)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="nd2.BinaryLayer.file_tag">file_tag</span></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The key for the binary layer in the CustomData metadata,
e.g. <code>RleZipBinarySequence_1_v1</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="nd2.BinaryLayer.layer_id">layer_id</span></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>The ID of the binary layer.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="nd2.BinaryLayer.coordinate_shape">coordinate_shape</span></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, ...]</code>)
          –
          <div class="doc-md-description">
            <p>The shape of the coordinates for the associated nd2 file.  This is used
to reshape the data into a 3D array in <code>asarray</code>.</p>
          </div>
        </li>
    </ul>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            asarray (nd2.BinaryLayer.asarray)" href="#nd2.BinaryLayer.asarray">asarray</a></code></b>
            –
            <div class="doc-md-description">
              <p>Stack all the frames into a single array.</p>
            </div>
          </li>
    </ul>






<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="nd2.BinaryLayer.frame_shape" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">frame_shape</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.BinaryLayer.frame_shape" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">frame_shape</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Shape (Y, X) of each mask in <code>data</code>.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="nd2.BinaryLayer.asarray" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">asarray</span>


<a href="#nd2.BinaryLayer.asarray" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">asarray</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Stack all the frames into a single array.</p>
<p>If there are no frames, returns None.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_binary.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">asarray</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stack all the frames into a single array.</span>

<span class="sd">    If there are no frames, returns None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">frame_shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_shape</span>
    <span class="k">if</span> <span class="n">frame_shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># TODO: this is a bit of a hack (takes up memory), but it works for now</span>
    <span class="c1"># could do something with dask</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">i</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">frame_shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;uint16&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">cast</span><span class="p">(</span>
        <span class="s2">&quot;np.ndarray&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coordinate_shape</span> <span class="o">+</span> <span class="n">frame_shape</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nd2.BinaryLayers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BinaryLayers</span>


<a href="#nd2.BinaryLayers" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">BinaryLayers</span><span class="p">(</span><span class="n"><span title="nd2.BinaryLayers(data)">data</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            BinaryLayer


  
      dataclass
   (nd2._binary.BinaryLayer)" href="#nd2.BinaryLayer">BinaryLayer</a></span><span class="p">])</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Sequence of Binary Layers found in an ND2 file.</p>
<p>This is the output type of <a class="autorefs autorefs-internal" title="            binary_data


  
      cached
      property
  " href="#nd2.ND2File.binary_data"><code>ND2File.binary_data</code></a>.</p>
<p>This object is a sequence of <code>BinaryLayer</code> objects, one for each binary layer in the
file.  Each layer has a <code>name</code> attribute, and a <code>data</code> attribute that is list of
numpy arrays - one for each frame in the experiment - or None if the layer was not
present in that frame.</p>
<p>The wrapper can be cast to a numpy array (with <code>BinaryLayers.asarray()</code> or
<code>np.asarray(BinaryLayers)</code>) to stack all the layers into a single array.  The output
array will have shape <code>(n_layers, *coord_shape, *frame_shape)</code>.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            asarray (nd2.BinaryLayers.asarray)" href="#nd2.BinaryLayers.asarray">asarray</a></code></b>
            –
            <div class="doc-md-description">
              <p>Stack all the layers/frames into a single array.</p>
            </div>
          </li>
    </ul>



                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>src/nd2/_binary.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BinaryLayer</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="nd2.BinaryLayers.asarray" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">asarray</span>


<a href="#nd2.BinaryLayers.asarray" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">asarray</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Stack all the layers/frames into a single array.</p>
<p>The output array will have shape (n_layers, <em>coord_shape, </em>frame_shape).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_binary.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">asarray</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stack all the layers/frames into a single array.</span>

<span class="sd">    The output array will have shape (n_layers, *coord_shape, *frame_shape).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">bin_layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">bin_layer</span><span class="o">.</span><span class="n">asarray</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nd2.ND2File" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ND2File</span>


<a href="#nd2.ND2File" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">ND2File</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="path (nd2.ND2File(path))" href="#nd2.ND2File(path)">path</a></span><span class="p">:</span> <span class="n"><span title="nd2._util.FileOrBinaryIO">FileOrBinaryIO</span></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="validate_frames (nd2.ND2File(validate_frames))" href="#nd2.ND2File(validate_frames)">validate_frames</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="search_window (nd2.ND2File(search_window))" href="#nd2.ND2File(search_window)">search_window</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Main objecting for opening and extracting data from an nd2 file.</p>
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">nd2</span><span class="o">.</span><span class="n">ND2File</span><span class="p">(</span><span class="s2">&quot;path/to/file.nd2&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">nd2_file</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>The key metadata outputs are:</p>
<ul>
<li><a class="autorefs autorefs-internal" title="            attributes


  
      cached
      property
  " href="#nd2.ND2File.attributes">attributes</a></li>
<li><a class="autorefs autorefs-internal" title="            metadata


  
      cached
      property
  " href="#nd2.ND2File.metadata">metadata</a> / <a class="autorefs autorefs-internal" title="            frame_metadata" href="#nd2.ND2File.frame_metadata">frame_metadata</a></li>
<li><a class="autorefs autorefs-internal" title="            experiment


  
      cached
      property
  " href="#nd2.ND2File.experiment">experiment</a></li>
<li><a class="autorefs autorefs-internal" title="            text_info


  
      cached
      property
  " href="#nd2.ND2File.text_info">text_info</a></li>
</ul>
<p>Some files may also have:</p>
<ul>
<li><a class="autorefs autorefs-internal" title="            binary_data


  
      cached
      property
  " href="#nd2.ND2File.binary_data">binary_data</a></li>
<li><a class="autorefs autorefs-internal" title="            rois


  
      cached
      property
  " href="#nd2.ND2File.rois">rois</a></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For a simple way to read nd2 file data into an array, see <a class="autorefs autorefs-internal" title="            imread" href="#nd2.imread">nd2.imread</a>.</p>
</div>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="nd2.ND2File(path)" class="doc doc-heading doc-heading-parameter">              <b><code>path</code></b>
<a href="#nd2.ND2File(path)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>Filename of an nd2 file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.ND2File(validate_frames)" class="doc doc-heading doc-heading-parameter">              <b><code>validate_frames</code></b>
<a href="#nd2.ND2File(validate_frames)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to verify (and attempt to fix) frames whose positions have been
shifted relative to the predicted offset (i.e. in a corrupted file).
This comes at a slight performance penalty at file open, but may "rescue"
some corrupt files. by default False.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.ND2File(search_window)" class="doc doc-heading doc-heading-parameter">              <b><code>search_window</code></b>
<a href="#nd2.ND2File(search_window)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>100</code>
)
          –
          <div class="doc-md-description">
            <p>When validate_frames is true, this is the search window (in KB) that will
be used to try to find the actual chunk position. by default 100 KB</p>
          </div>
        </li>
    </ul>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            asarray (nd2.ND2File.asarray)" href="#nd2.ND2File.asarray">asarray</a></code></b>
            –
            <div class="doc-md-description">
              <p>Read image into a <a class="autorefs autorefs-external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">numpy.ndarray</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            close (nd2.ND2File.close)" href="#nd2.ND2File.close">close</a></code></b>
            –
            <div class="doc-md-description">
              <p>Close file.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            events (nd2.ND2File.events)" href="#nd2.ND2File.events">events</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return tabular data recorded for each frame and/or event of the experiment.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            frame_metadata (nd2.ND2File.frame_metadata)" href="#nd2.ND2File.frame_metadata">frame_metadata</a></code></b>
            –
            <div class="doc-md-description">
              <p>Metadata for specific frame.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            is_supported_file


  
      staticmethod
   (nd2.ND2File.is_supported_file)" href="#nd2.ND2File.is_supported_file">is_supported_file</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return <code>True</code> if the file is supported by this reader.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            jobs (nd2.ND2File.jobs)" href="#nd2.ND2File.jobs">jobs</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return JOBS metadata if the file was acquired using JOBS, else None.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            ome_metadata (nd2.ND2File.ome_metadata)" href="#nd2.ND2File.ome_metadata">ome_metadata</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return <code>ome_types.OME</code> metadata object for this file.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            open (nd2.ND2File.open)" href="#nd2.ND2File.open">open</a></code></b>
            –
            <div class="doc-md-description">
              <p>Open file for reading.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            read_frame (nd2.ND2File.read_frame)" href="#nd2.ND2File.read_frame">read_frame</a></code></b>
            –
            <div class="doc-md-description">
              <p>Read a single frame from the file, indexed by frame number.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            to_dask (nd2.ND2File.to_dask)" href="#nd2.ND2File.to_dask">to_dask</a></code></b>
            –
            <div class="doc-md-description">
              <p>Create dask array (delayed reader) representing image.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            to_xarray (nd2.ND2File.to_xarray)" href="#nd2.ND2File.to_xarray">to_xarray</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return a labeled <a class="autorefs autorefs-external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray">xarray.DataArray</a> representing image.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            unstructured_metadata (nd2.ND2File.unstructured_metadata)" href="#nd2.ND2File.unstructured_metadata">unstructured_metadata</a></code></b>
            –
            <div class="doc-md-description">
              <p>Exposes, and attempts to decode, each metadata chunk in the file.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            voxel_size (nd2.ND2File.voxel_size)" href="#nd2.ND2File.voxel_size">voxel_size</a></code></b>
            –
            <div class="doc-md-description">
              <p>XYZ voxel size in microns.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            write_ome_zarr (nd2.ND2File.write_ome_zarr)" href="#nd2.ND2File.write_ome_zarr">write_ome_zarr</a></code></b>
            –
            <div class="doc-md-description">
              <p>Export to an OME-Zarr store.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            write_tiff (nd2.ND2File.write_tiff)" href="#nd2.ND2File.write_tiff">write_tiff</a></code></b>
            –
            <div class="doc-md-description">
              <p>Export to an (OME)-TIFF file.</p>
            </div>
          </li>
    </ul>




<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            attributes


  
      cached
      property
   (nd2.ND2File.attributes)" href="#nd2.ND2File.attributes">attributes</a></code></b>
              (<code><a class="autorefs autorefs-internal" title="            Attributes (nd2.structures.Attributes)" href="structures/#nd2.structures.Attributes">Attributes</a></code>)
          –
          <div class="doc-md-description">
            <p>Core image attributes.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            binary_data


  
      cached
      property
   (nd2.ND2File.binary_data)" href="#nd2.ND2File.binary_data">binary_data</a></code></b>
              (<code><a class="autorefs autorefs-internal" title="            BinaryLayers (nd2._binary.BinaryLayers)" href="#nd2.BinaryLayers">BinaryLayers</a> | None</code>)
          –
          <div class="doc-md-description">
            <p>Return binary layers embedded in the file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            closed


  
      property
   (nd2.ND2File.closed)" href="#nd2.ND2File.closed">closed</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>)
          –
          <div class="doc-md-description">
            <p>Return <code>True</code> if the file is closed.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            components_per_channel


  
      property
   (nd2.ND2File.components_per_channel)" href="#nd2.ND2File.components_per_channel">components_per_channel</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>Number of components per channel (e.g. 3 for rgb).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            custom_data


  
      cached
      property
   (nd2.ND2File.custom_data)" href="#nd2.ND2File.custom_data">custom_data</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Dict of various unstructured custom metadata.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            dtype


  
      cached
      property
   (nd2.ND2File.dtype)" href="#nd2.ND2File.dtype">dtype</a></code></b>
              (<code><a class="autorefs autorefs-external" title="numpy.dtype" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype">dtype</a></code>)
          –
          <div class="doc-md-description">
            <p>Image data type.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            experiment


  
      cached
      property
   (nd2.ND2File.experiment)" href="#nd2.ND2File.experiment">experiment</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="            ExpLoop


  
      module-attribute
   (nd2.structures.ExpLoop)" href="structures/#nd2.structures.ExpLoop">ExpLoop</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Loop information for each axis of an nD acquisition.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            is_legacy


  
      property
   (nd2.ND2File.is_legacy)" href="#nd2.ND2File.is_legacy">is_legacy</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>)
          –
          <div class="doc-md-description">
            <p>Whether file is a legacy nd2 (JPEG2000) file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            is_rgb


  
      property
   (nd2.ND2File.is_rgb)" href="#nd2.ND2File.is_rgb">is_rgb</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>)
          –
          <div class="doc-md-description">
            <p>Whether the image is rgb (i.e. it has 3 or 4 components per channel).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            loop_indices


  
      cached
      property
   (nd2.ND2File.loop_indices)" href="#nd2.ND2File.loop_indices">loop_indices</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], ...]</code>)
          –
          <div class="doc-md-description">
            <p>Return a tuple of dicts of loop indices for each frame.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            metadata


  
      cached
      property
   (nd2.ND2File.metadata)" href="#nd2.ND2File.metadata">metadata</a></code></b>
              (<code><a class="autorefs autorefs-internal" title="            Metadata


  
      dataclass
   (nd2.structures.Metadata)" href="structures/#nd2.structures.Metadata">Metadata</a></code>)
          –
          <div class="doc-md-description">
            <p>Various metadata (will be <code>dict</code> only if legacy format).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            nbytes


  
      property
   (nd2.ND2File.nbytes)" href="#nd2.ND2File.nbytes">nbytes</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>Total bytes of image data.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            ndim


  
      cached
      property
   (nd2.ND2File.ndim)" href="#nd2.ND2File.ndim">ndim</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>Number of dimensions (i.e. <code>len(</code><a class="autorefs autorefs-internal" title="            shape


  
      cached
      property
  " href="#nd2.ND2File.shape"><code>self.shape</code></a><code>)</code>).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            path


  
      property
   (nd2.ND2File.path)" href="#nd2.ND2File.path">path</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>Path of the image.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            rois


  
      cached
      property
   (nd2.ND2File.rois)" href="#nd2.ND2File.rois">rois</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-internal" title="            ROI


  
      dataclass
   (nd2.structures.ROI)" href="structures/#nd2.structures.ROI">ROI</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Return dict of <code>{id: ROI}</code> for all ROIs found in the metadata.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            shape


  
      cached
      property
   (nd2.ND2File.shape)" href="#nd2.ND2File.shape">shape</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, ...]</code>)
          –
          <div class="doc-md-description">
            <p>Size of each axis.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            size


  
      property
   (nd2.ND2File.size)" href="#nd2.ND2File.size">size</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>Total number of voxels in the volume (the product of the shape).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            sizes


  
      cached
      property
   (nd2.ND2File.sizes)" href="#nd2.ND2File.sizes">sizes</a></code></b>
              (<code><a class="autorefs autorefs-external" title="collections.abc.Mapping" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping">Mapping</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Names and sizes for each axis.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            text_info


  
      cached
      property
   (nd2.ND2File.text_info)" href="#nd2.ND2File.text_info">text_info</a></code></b>
              (<code><a class="autorefs autorefs-internal" title="            TextInfo (nd2.structures.TextInfo)" href="structures/#nd2.structures.TextInfo">TextInfo</a></code>)
          –
          <div class="doc-md-description">
            <p>Miscellaneous text info.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            version


  
      cached
      property
   (nd2.ND2File.version)" href="#nd2.ND2File.version">version</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, ...]</code>)
          –
          <div class="doc-md-description">
            <p>Return the file format version as a tuple of ints.</p>
          </div>
        </li>
    </ul>

                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">FileOrBinaryIO</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">validate_frames</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">search_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_error_radius</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">search_window</span> <span class="o">*</span> <span class="mi">1000</span> <span class="k">if</span> <span class="n">validate_frames</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_rdr</span> <span class="o">=</span> <span class="n">ND2Reader</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_error_radius</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rdr</span><span class="o">.</span><span class="n">_path</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">RLock</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.attributes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">attributes</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.attributes" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">attributes</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Attributes (nd2.structures.Attributes)" href="structures/#nd2.structures.Attributes">Attributes</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Core image attributes.</p>
<div class="admonition example">
<p class="admonition-title">Example Output</p>
<div class="highlight"><pre><span></span><code><span class="n">Attributes</span><span class="p">(</span>
    <span class="n">bitsPerComponentInMemory</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="n">bitsPerComponentSignificant</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="n">componentCount</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">heightPx</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span>
    <span class="n">pixelDataType</span><span class="o">=</span><span class="s2">&quot;unsigned&quot;</span><span class="p">,</span>
    <span class="n">sequenceCount</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
    <span class="n">widthBytes</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span>
    <span class="n">widthPx</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span>
    <span class="n">compressionLevel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">compressionType</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tileHeightPx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tileWidthPx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">channelCount</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
</div>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<b><code>attrs</code></b> (              <code><a class="autorefs autorefs-internal" title="            Attributes (nd2.structures.Attributes)" href="structures/#nd2.structures.Attributes">Attributes</a></code>
)          –
          <div class="doc-md-description">
            <p>Core image attributes</p>
          </div>
        </li>
    </ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.binary_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">binary_data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.binary_data" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">binary_data</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            BinaryLayers (nd2._binary.BinaryLayers)" href="#nd2.BinaryLayers">BinaryLayers</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return binary layers embedded in the file.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.5.1</p>
</div>
<p>The returned <a class="autorefs autorefs-internal" title="            BinaryLayers" href="#nd2.BinaryLayers"><code>BinaryLayers</code></a> object is an immutable sequence
of <a class="autorefs autorefs-internal" title="            BinaryLayer


  
      dataclass
  " href="#nd2.BinaryLayer"><code>BinaryLayer</code></a> objects, one for each binary layer in the
file (there will usually be a binary layer associated with each channel in the
dataset).</p>
<p>Each <code>BinaryLayer</code> object in the sequence has a <code>name</code> attribute, and a <code>data</code>
attribute which is list of numpy arrays (or <code>None</code> if there was no binary mask
for that frame).  The length of the list will be the same as the number of
sequence frames in this file (i.e. <code>self.attributes.sequenceCount</code>).
<code>BinaryLayers</code> can be indexed directly with an integer corresponding to the
<em>frame</em> index.</p>
<p>Both the <code>BinaryLayers</code> and individual <code>BinaryLayer</code> objects can be cast to a
numpy array with <code>np.asarray()</code>, or by using the <code>.asarray()</code> method</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            BinaryLayers (nd2._binary.BinaryLayers)" href="#nd2.BinaryLayers">BinaryLayers</a> | None</code>
          –
          <div class="doc-md-description">
            <p>The binary layers embedded in the file, or None if there are no binary
layers.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ND2File</span><span class="p">(</span><span class="s2">&quot;path/to/file.nd2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">binary_data</span>
<span class="go">&lt;BinaryLayers with 4 layers&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first_layer</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">binary_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># the first binary layer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first_layer</span>
<span class="go">BinaryLayer(name=&#39;attached Widefield green (green color)&#39;,</span>
<span class="go">comp_name=&#39;Widefield Green&#39;, comp_order=2, color=65280, color_mode=0,</span>
<span class="go">state=524288, file_tag=&#39;RleZipBinarySequence_1_v1&#39;, layer_id=2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first_layer</span><span class="o">.</span><span class="n">data</span>  <span class="c1"># list of arrays</span>
<span class="go"># you can also index in to the BinaryLayers object itself</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first_layer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># get binary data for first frame (or None if missing)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">first_layer</span><span class="p">)</span>  <span class="c1"># cast to array matching shape of full sequence</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">binary_data</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>  <span class="c1"># cast all layers to array</span>
<span class="go">(4, 3, 4, 5, 32, 32)</span>
</code></pre></div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.closed" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">closed</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.closed" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">closed</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return <code>True</code> if the file is closed.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.components_per_channel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">components_per_channel</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.components_per_channel" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">components_per_channel</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Number of components per channel (e.g. 3 for rgb).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.custom_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">custom_data</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.custom_data" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">custom_data</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Dict of various unstructured custom metadata.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.dtype" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">dtype</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.dtype" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">dtype</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="numpy.dtype" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype">dtype</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Image data type.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.experiment" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">experiment</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.experiment" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">experiment</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            ExpLoop


  
      module-attribute
   (nd2.structures.ExpLoop)" href="structures/#nd2.structures.ExpLoop">ExpLoop</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Loop information for each axis of an nD acquisition.</p>
<details class="example">
<summary>Example Output</summary>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
    <span class="n">TimeLoop</span><span class="p">(</span>
        <span class="n">count</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">nestingLevel</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">TimeLoopParams</span><span class="p">(</span>
            <span class="n">startMs</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">periodMs</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
            <span class="n">durationMs</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">periodDiff</span><span class="o">=</span><span class="n">PeriodDiff</span><span class="p">(</span>
                <span class="n">avg</span><span class="o">=</span><span class="mf">3674.199951171875</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mf">3701.219970703125</span><span class="p">,</span>
                <span class="nb">min</span><span class="o">=</span><span class="mf">3647.179931640625</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;TimeLoop&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">ZStackLoop</span><span class="p">(</span>
        <span class="n">count</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">nestingLevel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">ZStackLoopParams</span><span class="p">(</span>
            <span class="n">homeIndex</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">stepUm</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
            <span class="n">bottomToTop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">deviceName</span><span class="o">=</span><span class="s2">&quot;Ti2 ZDrive&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;ZStackLoop&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">]</span>
</code></pre></div>
</details>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="            ExpLoop


  
      module-attribute
   (nd2.structures.ExpLoop)" href="structures/#nd2.structures.ExpLoop">ExpLoop</a>]</code>
          –
          <div class="doc-md-description">
            
          </div>
        </li>
    </ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.is_legacy" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">is_legacy</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.is_legacy" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">is_legacy</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Whether file is a legacy nd2 (JPEG2000) file.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.is_rgb" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">is_rgb</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.is_rgb" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">is_rgb</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Whether the image is rgb (i.e. it has 3 or 4 components per channel).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.loop_indices" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">loop_indices</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.loop_indices" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">loop_indices</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="o">...</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return a tuple of dicts of loop indices for each frame.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.8.0</p>
</div>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">nd2</span><span class="o">.</span><span class="n">ND2File</span><span class="p">(</span><span class="s2">&quot;path/to/file.nd2&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">loop_indices</span>
<span class="go">(</span>
<span class="go">    {&#39;Z&#39;: 0, &#39;T&#39;: 0, &#39;C&#39;: 0},</span>
<span class="go">    {&#39;Z&#39;: 0, &#39;T&#39;: 0, &#39;C&#39;: 1},</span>
<span class="go">    {&#39;Z&#39;: 0, &#39;T&#39;: 0, &#39;C&#39;: 2},</span>
<span class="go">    ...</span>
<span class="go">)</span>
</code></pre></div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.metadata" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">metadata</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.metadata" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">metadata</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Metadata


  
      dataclass
   (nd2.structures.Metadata)" href="structures/#nd2.structures.Metadata">Metadata</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Various metadata (will be <code>dict</code> only if legacy format).</p>
<details class="example">
<summary>Example output</summary>
<div class="highlight"><pre><span></span><code><span class="n">Metadata</span><span class="p">(</span>
    <span class="n">contents</span><span class="o">=</span><span class="n">Contents</span><span class="p">(</span><span class="n">channelCount</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">frameCount</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span>
    <span class="n">channels</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Channel</span><span class="p">(</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">ChannelMeta</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Widefield Green&quot;</span><span class="p">,</span>
                <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">Color</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">91</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">1.0</span><span class="p">),</span>
                <span class="n">emissionLambdaNm</span><span class="o">=</span><span class="mf">535.0</span><span class="p">,</span>
                <span class="n">excitationLambdaNm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">loops</span><span class="o">=</span><span class="n">LoopIndices</span><span class="p">(</span>
                <span class="n">NETimeLoop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">TimeLoop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">XYPosLoop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ZStackLoop</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">),</span>
            <span class="n">microscope</span><span class="o">=</span><span class="n">Microscope</span><span class="p">(</span>
                <span class="n">objectiveMagnification</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
                <span class="n">objectiveName</span><span class="o">=</span><span class="s2">&quot;Plan Fluor 10x Ph1 DLL&quot;</span><span class="p">,</span>
                <span class="n">objectiveNumericalAperture</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                <span class="n">zoomMagnification</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">immersionRefractiveIndex</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">projectiveMagnification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">pinholeDiameterUm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">modalityFlags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fluorescence&quot;</span><span class="p">],</span>
            <span class="p">),</span>
            <span class="n">volume</span><span class="o">=</span><span class="n">Volume</span><span class="p">(</span>
                <span class="n">axesCalibrated</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
                <span class="n">axesCalibration</span><span class="o">=</span><span class="p">[</span><span class="mf">0.652452890023035</span><span class="p">,</span> <span class="mf">0.652452890023035</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
                <span class="n">axesInterpretation</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">,</span> <span class="s2">&quot;distance&quot;</span><span class="p">,</span> <span class="s2">&quot;distance&quot;</span><span class="p">],</span>
                <span class="n">bitsPerComponentInMemory</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
                <span class="n">bitsPerComponentSignificant</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
                <span class="n">cameraTransformationMatrix</span><span class="o">=</span><span class="p">[</span>
                    <span class="o">-</span><span class="mf">0.9998932296054086</span><span class="p">,</span>
                    <span class="o">-</span><span class="mf">0.014612644841559427</span><span class="p">,</span>
                    <span class="mf">0.014612644841559427</span><span class="p">,</span>
                    <span class="o">-</span><span class="mf">0.9998932296054086</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="n">componentCount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">componentDataType</span><span class="o">=</span><span class="s2">&quot;unsigned&quot;</span><span class="p">,</span>
                <span class="n">voxelCount</span><span class="o">=</span><span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
                <span class="n">componentMaxima</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
                <span class="n">componentMinima</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
                <span class="n">pixelToStageTransformationMatrix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="n">Channel</span><span class="p">(</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">ChannelMeta</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Widefield Red&quot;</span><span class="p">,</span>
                <span class="n">index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">Color</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">85</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">1.0</span><span class="p">),</span>
                <span class="n">emissionLambdaNm</span><span class="o">=</span><span class="mf">620.0</span><span class="p">,</span>
                <span class="n">excitationLambdaNm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">loops</span><span class="o">=</span><span class="n">LoopIndices</span><span class="p">(</span>
                <span class="n">NETimeLoop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">TimeLoop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">XYPosLoop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ZStackLoop</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">),</span>
            <span class="n">microscope</span><span class="o">=</span><span class="n">Microscope</span><span class="p">(</span>
                <span class="n">objectiveMagnification</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
                <span class="n">objectiveName</span><span class="o">=</span><span class="s2">&quot;Plan Fluor 10x Ph1 DLL&quot;</span><span class="p">,</span>
                <span class="n">objectiveNumericalAperture</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                <span class="n">zoomMagnification</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">immersionRefractiveIndex</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">projectiveMagnification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">pinholeDiameterUm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">modalityFlags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fluorescence&quot;</span><span class="p">],</span>
            <span class="p">),</span>
            <span class="n">volume</span><span class="o">=</span><span class="n">Volume</span><span class="p">(</span>
                <span class="n">axesCalibrated</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
                <span class="n">axesCalibration</span><span class="o">=</span><span class="p">[</span><span class="mf">0.652452890023035</span><span class="p">,</span> <span class="mf">0.652452890023035</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
                <span class="n">axesInterpretation</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">,</span> <span class="s2">&quot;distance&quot;</span><span class="p">,</span> <span class="s2">&quot;distance&quot;</span><span class="p">],</span>
                <span class="n">bitsPerComponentInMemory</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
                <span class="n">bitsPerComponentSignificant</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
                <span class="n">cameraTransformationMatrix</span><span class="o">=</span><span class="p">[</span>
                    <span class="o">-</span><span class="mf">0.9998932296054086</span><span class="p">,</span>
                    <span class="o">-</span><span class="mf">0.014612644841559427</span><span class="p">,</span>
                    <span class="mf">0.014612644841559427</span><span class="p">,</span>
                    <span class="o">-</span><span class="mf">0.9998932296054086</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="n">componentCount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">componentDataType</span><span class="o">=</span><span class="s2">&quot;unsigned&quot;</span><span class="p">,</span>
                <span class="n">voxelCount</span><span class="o">=</span><span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
                <span class="n">componentMaxima</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
                <span class="n">componentMinima</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
                <span class="n">pixelToStageTransformationMatrix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
</code></pre></div>
</details>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            Metadata


  
      dataclass
   (nd2.structures.Metadata)" href="structures/#nd2.structures.Metadata">Metadata</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code>
          –
          <div class="doc-md-description">
            <p>dict if legacy format, else <code>Metadata</code></p>
          </div>
        </li>
    </ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.nbytes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">nbytes</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.nbytes" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">nbytes</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Total bytes of image data.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.ndim" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">ndim</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.ndim" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ndim</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Number of dimensions (i.e. <code>len(</code><a class="autorefs autorefs-internal" title="            shape


  
      cached
      property
  " href="#nd2.ND2File.shape"><code>self.shape</code></a><code>)</code>).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">path</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.path" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">path</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Path of the image.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.rois" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">rois</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.rois" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">rois</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="            ROI


  
      dataclass
   (nd2.structures.ROI)" href="structures/#nd2.structures.ROI">ROI</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return dict of <code>{id: ROI}</code> for all ROIs found in the metadata.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.4.6</p>
</div>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-internal" title="            ROI


  
      dataclass
   (nd2.structures.ROI)" href="structures/#nd2.structures.ROI">ROI</a>]</code>
          –
          <div class="doc-md-description">
            <p>The dict of ROIs is keyed by the ROI ID.</p>
          </div>
        </li>
    </ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.shape" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">shape</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.shape" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">shape</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Size of each axis.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ndfile</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 5, 2, 512, 512)</span>
</code></pre></div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.size" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">size</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.size" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">size</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Total number of voxels in the volume (the product of the shape).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.sizes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">sizes</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.sizes" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">sizes</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Mapping" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping">Mapping</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Names and sizes for each axis.</p>
<p>This is an ordered dict, with the same order
as the corresponding <a class="autorefs autorefs-internal" title="            shape


  
      cached
      property
  " href="#nd2.ND2File.shape">shape</a></p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ndfile</span><span class="o">.</span><span class="n">sizes</span>
<span class="go">{&#39;T&#39;: 3, &#39;Z&#39;: 5, &#39;C&#39;: 2, &#39;Y&#39;: 512, &#39;X&#39;: 512}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndfile</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 5, 2, 512, 512)</span>
</code></pre></div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.text_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">text_info</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.text_info" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">text_info</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            TextInfo (nd2.structures.TextInfo)" href="structures/#nd2.structures.TextInfo">TextInfo</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Miscellaneous text info.</p>
<details class="example">
<summary>Example Output</summary>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Metadata:</span><span class="se">\r\n</span><span class="s1">Dimensions: T(3) x XY(4) x λ(2) x Z(5)...&#39;</span>
    <span class="s1">&#39;capturing&#39;</span><span class="p">:</span> <span class="s1">&#39;Flash4.0, SN:101412</span><span class="se">\r\n</span><span class="s1">Sample 1:</span><span class="se">\r\n</span><span class="s1">  Exposure: 100 ms...&#39;</span>
    <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;9/28/2021  9:41:27 AM&#39;</span><span class="p">,</span>
    <span class="s1">&#39;optics&#39;</span><span class="p">:</span> <span class="s1">&#39;Plan Fluor 10x Ph1 DLL&#39;</span>
<span class="p">}</span>
</code></pre></div>
</details>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            TextInfo (nd2.structures.TextInfo)" href="structures/#nd2.structures.TextInfo">TextInfo</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code>
          –
          <div class="doc-md-description">
            <p>If the file is a legacy nd2 file, a dict is returned. Otherwise, a
<code>TextInfo</code> object is returned.</p>
          </div>
        </li>
    </ul>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nd2.ND2File.version" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">version</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nd2.ND2File.version" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">version</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the file format version as a tuple of ints.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.6.1</p>
</div>
<p>Likely values are:</p>
<ul>
<li><code>(1, 0)</code> = a legacy nd2 file (JPEG2000)</li>
<li><code>(2, 0)</code>, <code>(2, 1)</code> = non-JPEG2000 nd2 with xml metadata</li>
<li><code>(3, 0)</code> = new format nd2 file with lite variant metadata</li>
<li><code>(-1, -1)</code> =</li>
</ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, ...]</code>
          –
          <div class="doc-md-description">
            <p>The file format version as a tuple of ints.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If the file is not a valid nd2 file.</p>
          </div>
        </li>
    </ul>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.asarray" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">asarray</span>


<a href="#nd2.ND2File.asarray" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">asarray</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="position (nd2.ND2File.asarray(position))" href="#nd2.ND2File.asarray(position)">position</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Read image into a <a class="autorefs autorefs-external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">numpy.ndarray</a>.</p>
<p>For a simple way to read a file into a numpy array, see <a class="autorefs autorefs-internal" title="            imread" href="#nd2.imread">nd2.imread</a>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.asarray(position)" class="doc doc-heading doc-heading-parameter">              <b><code>position</code></b>
<a href="#nd2.ND2File.asarray(position)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A specific XY position to extract, by default (None) reads all.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<b><code>array</code></b> (              <code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
)          –
          <div class="doc-md-description">
            
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>if <code>position</code> is a string and is not a valid position name</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#IndexError">IndexError</a></code>
            –
          <div class="doc-md-description">
            <p>if <code>position</code> is provided and is out of range</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">asarray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read image into a [numpy.ndarray][].</span>

<span class="sd">    For a simple way to read a file into a numpy array, see [nd2.imread][].</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    position : int, optional</span>
<span class="sd">        A specific XY position to extract, by default (None) reads all.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    array : np.ndarray</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        if `position` is a string and is not a valid position name</span>
<span class="sd">    IndexError</span>
<span class="sd">        if `position` is provided and is out of range</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_shape</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">seqs</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_frame_count</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position_names</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">position</span><span class="si">!r}</span><span class="s2"> is not a valid position name&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pidx</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sizes</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">AXIS</span><span class="o">.</span><span class="n">POSITION</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">position</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Position </span><span class="si">{</span><span class="n">position</span><span class="si">}</span><span class="s2"> is out of range. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Only 1 position available&quot;</span>
                <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
            <span class="n">seqs</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_frame_count</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">position</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizes</span><span class="p">[</span><span class="n">AXIS</span><span class="o">.</span><span class="n">POSITION</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span>  <span class="c1"># pragma: no cover</span>
                    <span class="sa">f</span><span class="s2">&quot;Position </span><span class="si">{</span><span class="n">position</span><span class="si">}</span><span class="s2"> is out of range. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Only </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sizes</span><span class="p">[</span><span class="n">AXIS</span><span class="o">.</span><span class="n">POSITION</span><span class="p">]</span><span class="si">}</span><span class="s2"> positions available&quot;</span>
                <span class="p">)</span>

            <span class="n">ranges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">range</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord_shape</span><span class="p">]</span>
            <span class="n">ranges</span><span class="p">[</span><span class="n">pidx</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span><span class="p">,)</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">ranges</span><span class="p">)))</span>
            <span class="n">seqs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_seq_index_from_coords</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="n">final_shape</span><span class="p">[</span><span class="n">pidx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">arr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">read_frame</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">seqs</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">final_shape</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.close" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">close</span>


<a href="#nd2.ND2File.close" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">close</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Close file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Files are best opened using a context manager:</p>
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">nd2</span><span class="o">.</span><span class="n">ND2File</span><span class="p">(</span><span class="s2">&quot;path/to/file.nd2&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">nd2_file</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>This will automatically close the file when the context exits.</p>
</div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Close file.</span>

<span class="sd">    !!! note</span>

<span class="sd">        Files are best opened using a context manager:</span>

<span class="sd">        ```python</span>
<span class="sd">        with nd2.ND2File(&quot;path/to/file.nd2&quot;) as nd2_file:</span>
<span class="sd">            ...</span>
<span class="sd">        ```</span>

<span class="sd">        This will automatically close the file when the context exits.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rdr</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.events" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">events</span>


<a href="#nd2.ND2File.events" class="headerlink" title="Permanent link">&para;</a></h3>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">events</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><span title="nd2._nd2file.ND2File.events(orient)">orient</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="s2">&quot;records&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n"><span title="nd2._nd2file.ND2File.events(null_value)">null_value</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="nd2._util.ListOfDicts">ListOfDicts</span></span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">events</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span> <span class="n"><span title="nd2._nd2file.ND2File.events(orient)">orient</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">],</span> <span class="n"><span title="nd2._nd2file.ND2File.events(null_value)">null_value</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span> <span class="o">=</span> <span class="o">...</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="nd2._util.DictOfLists">DictOfLists</span></span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">events</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span> <span class="n"><span title="nd2._nd2file.ND2File.events(orient)">orient</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="s2">&quot;dict&quot;</span><span class="p">],</span> <span class="n"><span title="nd2._nd2file.ND2File.events(null_value)">null_value</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span> <span class="o">=</span> <span class="o">...</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="nd2._util.DictOfDicts">DictOfDicts</span></span>
</code></pre></div>          </div>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">events</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="orient (nd2.ND2File.events(orient))" href="#nd2.ND2File.events(orient)">orient</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;dict&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;records&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="null_value (nd2.ND2File.events(null_value))" href="#nd2.ND2File.events(null_value)">null_value</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="nd2._util.ListOfDicts">ListOfDicts</span></span> <span class="o">|</span> <span class="n"><span title="nd2._util.DictOfLists">DictOfLists</span></span> <span class="o">|</span> <span class="n"><span title="nd2._util.DictOfDicts">DictOfDicts</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return tabular data recorded for each frame and/or event of the experiment.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.6.1</p>
</div>
<p>This method returns tabular data in the format specified by the <code>orient</code>
argument:
    - 'records' : list of dict - <code>[{column -&gt; value}, ...]</code> (default)
    - 'dict' :    dict of dict - <code>{column -&gt; {index -&gt; value}, ...}</code>
    - 'list' :    dict of list - <code>{column -&gt; [value, ...]}</code></p>
<p>All return types are passable to pd.DataFrame(). It matches the tabular data
reported in the Image Properties &gt; Recorded Data tab of the NIS Viewer.</p>
<p>There will be a column for each tag in the <code>CustomDataV2_0</code> section of
<code>ND2File.custom_data</code>, as well columns for any events recorded in the
data.  Not all cells will be populated, and empty cells will be filled
with <code>null_value</code> (default <code>float('nan')</code>).</p>
<p>Legacy ND2 files are not supported.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.events(orient)" class="doc doc-heading doc-heading-parameter">              <b><code>orient</code></b>
<a href="#nd2.ND2File.events(orient)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code>(&#39;records&#39;, &#39;dict&#39;, &#39;list&#39;)</code>, default:
                  <code>&#39;records&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The format of the returned data. See <code>pandas.DataFrame
    - 'records' : list of dict -</code>[{column -&gt; value}, ...]<code>(default)
    - 'dict' :    dict of dict -</code>{column -&gt; {index -&gt; value}, ...}<code>- 'list' :    dict of list -</code>{column -&gt; [value, ...]}`</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.events(null_value)" class="doc doc-heading doc-heading-parameter">              <b><code>null_value</code></b>
<a href="#nd2.ND2File.events(null_value)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></code>, default:
                  <code>float(&#39;nan&#39;)</code>
)
          –
          <div class="doc-md-description">
            <p>The value to use for missing data.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="nd2._util.ListOfDicts">ListOfDicts</span> | <span title="nd2._util.DictOfLists">DictOfLists</span> | <span title="nd2._util.DictOfDicts">DictOfDicts</span></code>
          –
          <div class="doc-md-description">
            <p>Tabular data in the format specified by <code>orient</code>.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">events</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">orient</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;dict&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;records&quot;</span><span class="p">,</span>
    <span class="n">null_value</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ListOfDicts</span> <span class="o">|</span> <span class="n">DictOfLists</span> <span class="o">|</span> <span class="n">DictOfDicts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return tabular data recorded for each frame and/or event of the experiment.</span>

<span class="sd">    !!! Tip &quot;new in version 0.6.1&quot;</span>

<span class="sd">    This method returns tabular data in the format specified by the `orient`</span>
<span class="sd">    argument:</span>
<span class="sd">        - &#39;records&#39; : list of dict - `[{column -&gt; value}, ...]` (default)</span>
<span class="sd">        - &#39;dict&#39; :    dict of dict - `{column -&gt; {index -&gt; value}, ...}`</span>
<span class="sd">        - &#39;list&#39; :    dict of list - `{column -&gt; [value, ...]}`</span>

<span class="sd">    All return types are passable to pd.DataFrame(). It matches the tabular data</span>
<span class="sd">    reported in the Image Properties &gt; Recorded Data tab of the NIS Viewer.</span>

<span class="sd">    There will be a column for each tag in the `CustomDataV2_0` section of</span>
<span class="sd">    `ND2File.custom_data`, as well columns for any events recorded in the</span>
<span class="sd">    data.  Not all cells will be populated, and empty cells will be filled</span>
<span class="sd">    with `null_value` (default `float(&#39;nan&#39;)`).</span>

<span class="sd">    Legacy ND2 files are not supported.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    orient : {&#39;records&#39;, &#39;dict&#39;, &#39;list&#39;}, default &#39;records&#39;</span>
<span class="sd">        The format of the returned data. See `pandas.DataFrame</span>
<span class="sd">            - &#39;records&#39; : list of dict - `[{column -&gt; value}, ...]` (default)</span>
<span class="sd">            - &#39;dict&#39; :    dict of dict - `{column -&gt; {index -&gt; value}, ...}`</span>
<span class="sd">            - &#39;list&#39; :    dict of list - `{column -&gt; [value, ...]}`</span>
<span class="sd">    null_value : Any, default float(&#39;nan&#39;)</span>
<span class="sd">        The value to use for missing data.</span>


<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    ListOfDicts | DictOfLists | DictOfDicts</span>
<span class="sd">        Tabular data in the format specified by `orient`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">orient</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="s2">&quot;dict&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;orient must be one of &#39;records&#39;, &#39;dict&#39;, or &#39;list&#39;&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rdr</span><span class="o">.</span><span class="n">events</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="n">orient</span><span class="p">,</span> <span class="n">null_value</span><span class="o">=</span><span class="n">null_value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.frame_metadata" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">frame_metadata</span>


<a href="#nd2.ND2File.frame_metadata" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">frame_metadata</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="seq_index (nd2.ND2File.frame_metadata(seq_index))" href="#nd2.ND2File.frame_metadata(seq_index)">seq_index</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            FrameMetadata


  
      dataclass
   (nd2.structures.FrameMetadata)" href="structures/#nd2.structures.FrameMetadata">FrameMetadata</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Metadata for specific frame.</p>
<p><img alt="👀" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f440.svg" title=":eyes:" /> <strong>See also:</strong> <a class="autorefs autorefs-internal" title="            metadata


  
      cached
      property
  " href="#nd2.ND2File.metadata">metadata</a></p>
<p>This includes the global metadata from the metadata function.
(will be dict if legacy format).</p>
<details class="example">
<summary>Example output</summary>
<div class="highlight"><pre><span></span><code><span class="n">FrameMetadata</span><span class="p">(</span>
    <span class="n">contents</span><span class="o">=</span><span class="n">Contents</span><span class="p">(</span><span class="n">channelCount</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">frameCount</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span>
    <span class="n">channels</span><span class="o">=</span><span class="p">[</span>
        <span class="n">FrameChannel</span><span class="p">(</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">ChannelMeta</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Widefield Green&quot;</span><span class="p">,</span>
                <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">Color</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">91</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">1.0</span><span class="p">),</span>
                <span class="n">emissionLambdaNm</span><span class="o">=</span><span class="mf">535.0</span><span class="p">,</span>
                <span class="n">excitationLambdaNm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">loops</span><span class="o">=</span><span class="n">LoopIndices</span><span class="p">(</span>
                <span class="n">NETimeLoop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">TimeLoop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">XYPosLoop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ZStackLoop</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">),</span>
            <span class="n">microscope</span><span class="o">=</span><span class="n">Microscope</span><span class="p">(</span>
                <span class="n">objectiveMagnification</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
                <span class="n">objectiveName</span><span class="o">=</span><span class="s2">&quot;Plan Fluor 10x Ph1 DLL&quot;</span><span class="p">,</span>
                <span class="n">objectiveNumericalAperture</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                <span class="n">zoomMagnification</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">immersionRefractiveIndex</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">projectiveMagnification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">pinholeDiameterUm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">modalityFlags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fluorescence&quot;</span><span class="p">],</span>
            <span class="p">),</span>
            <span class="n">volume</span><span class="o">=</span><span class="n">Volume</span><span class="p">(</span>
                <span class="n">axesCalibrated</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
                <span class="n">axesCalibration</span><span class="o">=</span><span class="p">[</span><span class="mf">0.652452890023035</span><span class="p">,</span> <span class="mf">0.652452890023035</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
                <span class="n">axesInterpretation</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">,</span> <span class="s2">&quot;distance&quot;</span><span class="p">,</span> <span class="s2">&quot;distance&quot;</span><span class="p">],</span>
                <span class="n">bitsPerComponentInMemory</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
                <span class="n">bitsPerComponentSignificant</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
                <span class="n">cameraTransformationMatrix</span><span class="o">=</span><span class="p">[</span>
                    <span class="o">-</span><span class="mf">0.9998932296054086</span><span class="p">,</span>
                    <span class="o">-</span><span class="mf">0.014612644841559427</span><span class="p">,</span>
                    <span class="mf">0.014612644841559427</span><span class="p">,</span>
                    <span class="o">-</span><span class="mf">0.9998932296054086</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="n">componentCount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">componentDataType</span><span class="o">=</span><span class="s2">&quot;unsigned&quot;</span><span class="p">,</span>
                <span class="n">voxelCount</span><span class="o">=</span><span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
                <span class="n">componentMaxima</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
                <span class="n">componentMinima</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
                <span class="n">pixelToStageTransformationMatrix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">position</span><span class="o">=</span><span class="n">Position</span><span class="p">(</span>
                <span class="n">stagePositionUm</span><span class="o">=</span><span class="n">StagePosition</span><span class="p">(</span>
                    <span class="n">x</span><span class="o">=</span><span class="mf">26950.2</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">1801.6000000000001</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">494.3</span>
                <span class="p">),</span>
                <span class="n">pfsOffset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">time</span><span class="o">=</span><span class="n">TimeStamp</span><span class="p">(</span>
                <span class="n">absoluteJulianDayNumber</span><span class="o">=</span><span class="mf">2459486.0682717753</span><span class="p">,</span>
                <span class="n">relativeTimeMs</span><span class="o">=</span><span class="mf">580.3582921028137</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="n">FrameChannel</span><span class="p">(</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">ChannelMeta</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Widefield Red&quot;</span><span class="p">,</span>
                <span class="n">index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">Color</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="mi">85</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">1.0</span><span class="p">),</span>
                <span class="n">emissionLambdaNm</span><span class="o">=</span><span class="mf">620.0</span><span class="p">,</span>
                <span class="n">excitationLambdaNm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">loops</span><span class="o">=</span><span class="n">LoopIndices</span><span class="p">(</span>
                <span class="n">NETimeLoop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">TimeLoop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">XYPosLoop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ZStackLoop</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">),</span>
            <span class="n">microscope</span><span class="o">=</span><span class="n">Microscope</span><span class="p">(</span>
                <span class="n">objectiveMagnification</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
                <span class="n">objectiveName</span><span class="o">=</span><span class="s2">&quot;Plan Fluor 10x Ph1 DLL&quot;</span><span class="p">,</span>
                <span class="n">objectiveNumericalAperture</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                <span class="n">zoomMagnification</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">immersionRefractiveIndex</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">projectiveMagnification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">pinholeDiameterUm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">modalityFlags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fluorescence&quot;</span><span class="p">],</span>
            <span class="p">),</span>
            <span class="n">volume</span><span class="o">=</span><span class="n">Volume</span><span class="p">(</span>
                <span class="n">axesCalibrated</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
                <span class="n">axesCalibration</span><span class="o">=</span><span class="p">[</span><span class="mf">0.652452890023035</span><span class="p">,</span> <span class="mf">0.652452890023035</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
                <span class="n">axesInterpretation</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">,</span> <span class="s2">&quot;distance&quot;</span><span class="p">,</span> <span class="s2">&quot;distance&quot;</span><span class="p">],</span>
                <span class="n">bitsPerComponentInMemory</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
                <span class="n">bitsPerComponentSignificant</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
                <span class="n">cameraTransformationMatrix</span><span class="o">=</span><span class="p">[</span>
                    <span class="o">-</span><span class="mf">0.9998932296054086</span><span class="p">,</span>
                    <span class="o">-</span><span class="mf">0.014612644841559427</span><span class="p">,</span>
                    <span class="mf">0.014612644841559427</span><span class="p">,</span>
                    <span class="o">-</span><span class="mf">0.9998932296054086</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="n">componentCount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">componentDataType</span><span class="o">=</span><span class="s2">&quot;unsigned&quot;</span><span class="p">,</span>
                <span class="n">voxelCount</span><span class="o">=</span><span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
                <span class="n">componentMaxima</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
                <span class="n">componentMinima</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span>
                <span class="n">pixelToStageTransformationMatrix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">position</span><span class="o">=</span><span class="n">Position</span><span class="p">(</span>
                <span class="n">stagePositionUm</span><span class="o">=</span><span class="n">StagePosition</span><span class="p">(</span>
                    <span class="n">x</span><span class="o">=</span><span class="mf">26950.2</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">1801.6000000000001</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">494.3</span>
                <span class="p">),</span>
                <span class="n">pfsOffset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">time</span><span class="o">=</span><span class="n">TimeStamp</span><span class="p">(</span>
                <span class="n">absoluteJulianDayNumber</span><span class="o">=</span><span class="mf">2459486.0682717753</span><span class="p">,</span>
                <span class="n">relativeTimeMs</span><span class="o">=</span><span class="mf">580.3582921028137</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
</code></pre></div>
</details>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.frame_metadata(seq_index)" class="doc doc-heading doc-heading-parameter">              <b><code>seq_index</code></b>
<a href="#nd2.ND2File.frame_metadata(seq_index)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><span title="Union">Union</span>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>]</code>)
          –
          <div class="doc-md-description">
            <p>frame index</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            FrameMetadata


  
      dataclass
   (nd2.structures.FrameMetadata)" href="structures/#nd2.structures.FrameMetadata">FrameMetadata</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code>
          –
          <div class="doc-md-description">
            <p>dict if legacy format, else FrameMetadata</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">frame_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FrameMetadata</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Metadata for specific frame.</span>

<span class="sd">    :eyes: **See also:** [metadata][nd2.ND2File.metadata]</span>

<span class="sd">    This includes the global metadata from the metadata function.</span>
<span class="sd">    (will be dict if legacy format).</span>

<span class="sd">    ??? example &quot;Example output&quot;</span>

<span class="sd">        ```python</span>
<span class="sd">        FrameMetadata(</span>
<span class="sd">            contents=Contents(channelCount=2, frameCount=15),</span>
<span class="sd">            channels=[</span>
<span class="sd">                FrameChannel(</span>
<span class="sd">                    channel=ChannelMeta(</span>
<span class="sd">                        name=&quot;Widefield Green&quot;,</span>
<span class="sd">                        index=0,</span>
<span class="sd">                        color=Color(r=91, g=255, b=0, a=1.0),</span>
<span class="sd">                        emissionLambdaNm=535.0,</span>
<span class="sd">                        excitationLambdaNm=None,</span>
<span class="sd">                    ),</span>
<span class="sd">                    loops=LoopIndices(</span>
<span class="sd">                        NETimeLoop=None, TimeLoop=0, XYPosLoop=None, ZStackLoop=1</span>
<span class="sd">                    ),</span>
<span class="sd">                    microscope=Microscope(</span>
<span class="sd">                        objectiveMagnification=10.0,</span>
<span class="sd">                        objectiveName=&quot;Plan Fluor 10x Ph1 DLL&quot;,</span>
<span class="sd">                        objectiveNumericalAperture=0.3,</span>
<span class="sd">                        zoomMagnification=1.0,</span>
<span class="sd">                        immersionRefractiveIndex=1.0,</span>
<span class="sd">                        projectiveMagnification=None,</span>
<span class="sd">                        pinholeDiameterUm=None,</span>
<span class="sd">                        modalityFlags=[&quot;fluorescence&quot;],</span>
<span class="sd">                    ),</span>
<span class="sd">                    volume=Volume(</span>
<span class="sd">                        axesCalibrated=[True, True, True],</span>
<span class="sd">                        axesCalibration=[0.652452890023035, 0.652452890023035, 1.0],</span>
<span class="sd">                        axesInterpretation=[&quot;distance&quot;, &quot;distance&quot;, &quot;distance&quot;],</span>
<span class="sd">                        bitsPerComponentInMemory=16,</span>
<span class="sd">                        bitsPerComponentSignificant=16,</span>
<span class="sd">                        cameraTransformationMatrix=[</span>
<span class="sd">                            -0.9998932296054086,</span>
<span class="sd">                            -0.014612644841559427,</span>
<span class="sd">                            0.014612644841559427,</span>
<span class="sd">                            -0.9998932296054086,</span>
<span class="sd">                        ],</span>
<span class="sd">                        componentCount=1,</span>
<span class="sd">                        componentDataType=&quot;unsigned&quot;,</span>
<span class="sd">                        voxelCount=[32, 32, 5],</span>
<span class="sd">                        componentMaxima=[0.0],</span>
<span class="sd">                        componentMinima=[0.0],</span>
<span class="sd">                        pixelToStageTransformationMatrix=None,</span>
<span class="sd">                    ),</span>
<span class="sd">                    position=Position(</span>
<span class="sd">                        stagePositionUm=StagePosition(</span>
<span class="sd">                            x=26950.2, y=-1801.6000000000001, z=494.3</span>
<span class="sd">                        ),</span>
<span class="sd">                        pfsOffset=None,</span>
<span class="sd">                        name=None,</span>
<span class="sd">                    ),</span>
<span class="sd">                    time=TimeStamp(</span>
<span class="sd">                        absoluteJulianDayNumber=2459486.0682717753,</span>
<span class="sd">                        relativeTimeMs=580.3582921028137,</span>
<span class="sd">                    ),</span>
<span class="sd">                ),</span>
<span class="sd">                FrameChannel(</span>
<span class="sd">                    channel=ChannelMeta(</span>
<span class="sd">                        name=&quot;Widefield Red&quot;,</span>
<span class="sd">                        index=1,</span>
<span class="sd">                        color=Color(r=255, g=85, b=0, a=1.0),</span>
<span class="sd">                        emissionLambdaNm=620.0,</span>
<span class="sd">                        excitationLambdaNm=None,</span>
<span class="sd">                    ),</span>
<span class="sd">                    loops=LoopIndices(</span>
<span class="sd">                        NETimeLoop=None, TimeLoop=0, XYPosLoop=None, ZStackLoop=1</span>
<span class="sd">                    ),</span>
<span class="sd">                    microscope=Microscope(</span>
<span class="sd">                        objectiveMagnification=10.0,</span>
<span class="sd">                        objectiveName=&quot;Plan Fluor 10x Ph1 DLL&quot;,</span>
<span class="sd">                        objectiveNumericalAperture=0.3,</span>
<span class="sd">                        zoomMagnification=1.0,</span>
<span class="sd">                        immersionRefractiveIndex=1.0,</span>
<span class="sd">                        projectiveMagnification=None,</span>
<span class="sd">                        pinholeDiameterUm=None,</span>
<span class="sd">                        modalityFlags=[&quot;fluorescence&quot;],</span>
<span class="sd">                    ),</span>
<span class="sd">                    volume=Volume(</span>
<span class="sd">                        axesCalibrated=[True, True, True],</span>
<span class="sd">                        axesCalibration=[0.652452890023035, 0.652452890023035, 1.0],</span>
<span class="sd">                        axesInterpretation=[&quot;distance&quot;, &quot;distance&quot;, &quot;distance&quot;],</span>
<span class="sd">                        bitsPerComponentInMemory=16,</span>
<span class="sd">                        bitsPerComponentSignificant=16,</span>
<span class="sd">                        cameraTransformationMatrix=[</span>
<span class="sd">                            -0.9998932296054086,</span>
<span class="sd">                            -0.014612644841559427,</span>
<span class="sd">                            0.014612644841559427,</span>
<span class="sd">                            -0.9998932296054086,</span>
<span class="sd">                        ],</span>
<span class="sd">                        componentCount=1,</span>
<span class="sd">                        componentDataType=&quot;unsigned&quot;,</span>
<span class="sd">                        voxelCount=[32, 32, 5],</span>
<span class="sd">                        componentMaxima=[0.0],</span>
<span class="sd">                        componentMinima=[0.0],</span>
<span class="sd">                        pixelToStageTransformationMatrix=None,</span>
<span class="sd">                    ),</span>
<span class="sd">                    position=Position(</span>
<span class="sd">                        stagePositionUm=StagePosition(</span>
<span class="sd">                            x=26950.2, y=-1801.6000000000001, z=494.3</span>
<span class="sd">                        ),</span>
<span class="sd">                        pfsOffset=None,</span>
<span class="sd">                        name=None,</span>
<span class="sd">                    ),</span>
<span class="sd">                    time=TimeStamp(</span>
<span class="sd">                        absoluteJulianDayNumber=2459486.0682717753,</span>
<span class="sd">                        relativeTimeMs=580.3582921028137,</span>
<span class="sd">                    ),</span>
<span class="sd">                ),</span>
<span class="sd">            ],</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    seq_index : Union[int, tuple]</span>
<span class="sd">        frame index</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    FrameMetadata | dict</span>
<span class="sd">        dict if legacy format, else FrameMetadata</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
        <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_seq_index_from_coords</span><span class="p">(</span><span class="n">seq_index</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">seq_index</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
            <span class="k">else</span> <span class="n">seq_index</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rdr</span><span class="o">.</span><span class="n">frame_metadata</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.is_supported_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_supported_file</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#nd2.ND2File.is_supported_file" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_supported_file</span><span class="p">(</span><span class="n"><span title="nd2.ND2File.is_supported_file(path)">path</span></span><span class="p">:</span> <span class="n"><span title="nd2._util.StrOrPath">StrOrPath</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return <code>True</code> if the file is supported by this reader.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">is_supported_file</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">StrOrPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return `True` if the file is supported by this reader.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">is_supported_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.jobs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">jobs</span>


<a href="#nd2.ND2File.jobs" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">jobs</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            JobsDict (nd2.jobs.types.JobsDict)" href="jobs/types/#nd2.jobs.types.JobsDict">JobsDict</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return JOBS metadata if the file was acquired using JOBS, else None.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.11.0</p>
</div>
<p>JOBS is a software feature in NIS Elements for automated acquisition workflows.
Files acquired with JOBS contain metadata about the job definition,
including task definitions and wellplate configurations.</p>
<p>The metadata is returned as a dictionary, and there are a <em>lot</em> of possible
types of JOBS definitions. You refer to <code>nd2.jobs.types</code> to see the typical
structure of these dictionaries (inferred from real-world jobs files).
But <code>nd2.jobs.types</code> should only ever be used for type hinting, and not imported
at runtime.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a> | None</code>
          –
          <div class="doc-md-description">
            <p>A dictionary with JOBS metadata, or None if the file was not
acquired using JOBS. The dictionary contains:</p>
<ul>
<li><code>"JobRunGUID"</code>: str - Unique identifier for the job run</li>
<li><code>"ProgramDesc"</code>: dict - Job description including JobDefType</li>
<li><code>"Job"</code>: dict | None - Full job definition (None if encrypted)</li>
<li><code>"ProtectedJob"</code>: dict | None - Encryption info (if encrypted)</li>
</ul>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">nd2</span><span class="o">.</span><span class="n">ND2File</span><span class="p">(</span><span class="s2">&quot;path/to/jobs_file.nd2&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">jobs</span> <span class="o">:=</span> <span class="n">f</span><span class="o">.</span><span class="n">jobs</span><span class="p">():</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="n">jobs</span><span class="p">[</span><span class="s2">&quot;JobRunGUID&quot;</span><span class="p">])</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">jobs</span><span class="p">[</span><span class="s2">&quot;Job&quot;</span><span class="p">]:</span>
<span class="gp">... </span>            <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">jobs</span><span class="p">[</span><span class="s2">&quot;Job&quot;</span><span class="p">][</span><span class="s2">&quot;Tasks&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">jobs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JobsDict</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return JOBS metadata if the file was acquired using JOBS, else None.</span>

<span class="sd">    !!! Tip &quot;new in version 0.11.0&quot;</span>

<span class="sd">    JOBS is a software feature in NIS Elements for automated acquisition workflows.</span>
<span class="sd">    Files acquired with JOBS contain metadata about the job definition,</span>
<span class="sd">    including task definitions and wellplate configurations.</span>

<span class="sd">    The metadata is returned as a dictionary, and there are a *lot* of possible</span>
<span class="sd">    types of JOBS definitions. You refer to `nd2.jobs.types` to see the typical</span>
<span class="sd">    structure of these dictionaries (inferred from real-world jobs files).</span>
<span class="sd">    But `nd2.jobs.types` should only ever be used for type hinting, and not imported</span>
<span class="sd">    at runtime.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict | None</span>
<span class="sd">        A dictionary with JOBS metadata, or None if the file was not</span>
<span class="sd">        acquired using JOBS. The dictionary contains:</span>

<span class="sd">        - `&quot;JobRunGUID&quot;`: str - Unique identifier for the job run</span>
<span class="sd">        - `&quot;ProgramDesc&quot;`: dict - Job description including JobDefType</span>
<span class="sd">        - `&quot;Job&quot;`: dict | None - Full job definition (None if encrypted)</span>
<span class="sd">        - `&quot;ProtectedJob&quot;`: dict | None - Encryption info (if encrypted)</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; with nd2.ND2File(&quot;path/to/jobs_file.nd2&quot;) as f:</span>
<span class="sd">    ...     if jobs := f.jobs():</span>
<span class="sd">    ...         print(jobs[&quot;JobRunGUID&quot;])</span>
<span class="sd">    ...         if jobs[&quot;Job&quot;]:</span>
<span class="sd">    ...             print(list(jobs[&quot;Job&quot;][&quot;Tasks&quot;].keys()))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rdr</span><span class="o">.</span><span class="n">jobs</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.ome_metadata" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">ome_metadata</span>


<a href="#nd2.ND2File.ome_metadata" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">ome_metadata</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="include_unstructured (nd2.ND2File.ome_metadata(include_unstructured))" href="#nd2.ND2File.ome_metadata(include_unstructured)">include_unstructured</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="tiff_file_name (nd2.ND2File.ome_metadata(tiff_file_name))" href="#nd2.ND2File.ome_metadata(tiff_file_name)">tiff_file_name</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="ome_types.OME" href="https://ome-types.readthedocs.io/en/latest/API/ome_types/#ome_types.OME">OME</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return <code>ome_types.OME</code> metadata object for this file.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.7.0</p>
</div>
<p>See the <a class="autorefs autorefs-external" href="https://ome-types.readthedocs.io/en/latest/API/ome_types/#ome_types.OME"><code>ome_types.OME</code></a> documentation for details on this object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.ome_metadata(include_unstructured)" class="doc doc-heading doc-heading-parameter">              <b><code>include_unstructured</code></b>
<a href="#nd2.ND2File.ome_metadata(include_unstructured)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to include all available metadata in the OME file. If <code>True</code>,
(the default), the <code>unstructured_metadata</code> method is used to fetch
all retrievable metadata, and the output is added to
OME.structured_annotations, where each key is the chunk key, and the
value is a JSON-serialized dict of the metadata. If <code>False</code>, only metadata
which can be directly added to the OME data model are included.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.ome_metadata(tiff_file_name)" class="doc doc-heading doc-heading-parameter">              <b><code>tiff_file_name</code></b>
<a href="#nd2.ND2File.ome_metadata(tiff_file_name)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>If provided, <a class="autorefs autorefs-external" href="https://ome-types.readthedocs.io/en/latest/API/ome_types.model/#ome_types._autogenerated.ome_2016_06.TiffData"><code>ome_types.model.TiffData</code></a> block entries are added for
each <a class="autorefs autorefs-external" href="https://ome-types.readthedocs.io/en/latest/API/ome_types.model/#ome_types._autogenerated.ome_2016_06.Plane"><code>ome_types.model.Plane</code></a> in the OME object, with the
<code>TiffData.uuid.file_name</code> set to this value. (Useful for exporting to
tiff.)</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">nd2</span>

<span class="k">with</span> <span class="n">nd2</span><span class="o">.</span><span class="n">ND2File</span><span class="p">(</span><span class="s2">&quot;path/to/file.nd2&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">ome</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">ome_metadata</span><span class="p">()</span>
    <span class="n">xml</span> <span class="o">=</span> <span class="n">ome</span><span class="o">.</span><span class="n">to_xml</span><span class="p">()</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ome_metadata</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">include_unstructured</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">tiff_file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OME</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return `ome_types.OME` metadata object for this file.</span>

<span class="sd">    !!! Tip &quot;new in version 0.7.0&quot;</span>

<span class="sd">    See the [`ome_types.OME`][] documentation for details on this object.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    include_unstructured : bool</span>
<span class="sd">        Whether to include all available metadata in the OME file. If `True`,</span>
<span class="sd">        (the default), the `unstructured_metadata` method is used to fetch</span>
<span class="sd">        all retrievable metadata, and the output is added to</span>
<span class="sd">        OME.structured_annotations, where each key is the chunk key, and the</span>
<span class="sd">        value is a JSON-serialized dict of the metadata. If `False`, only metadata</span>
<span class="sd">        which can be directly added to the OME data model are included.</span>
<span class="sd">    tiff_file_name : str | None</span>
<span class="sd">        If provided, [`ome_types.model.TiffData`][] block entries are added for</span>
<span class="sd">        each [`ome_types.model.Plane`][] in the OME object, with the</span>
<span class="sd">        `TiffData.uuid.file_name` set to this value. (Useful for exporting to</span>
<span class="sd">        tiff.)</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```python</span>
<span class="sd">    import nd2</span>

<span class="sd">    with nd2.ND2File(&quot;path/to/file.nd2&quot;) as f:</span>
<span class="sd">        ome = f.ome_metadata()</span>
<span class="sd">        xml = ome.to_xml()</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">._ome</span><span class="w"> </span><span class="kn">import</span> <span class="n">nd2_ome_metadata</span>

    <span class="k">return</span> <span class="n">nd2_ome_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">include_unstructured</span><span class="o">=</span><span class="n">include_unstructured</span><span class="p">,</span>
        <span class="n">tiff_file_name</span><span class="o">=</span><span class="n">tiff_file_name</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.open" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">open</span>


<a href="#nd2.ND2File.open" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">open</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Open file for reading.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Files are best opened using a context manager:</p>
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">nd2</span><span class="o">.</span><span class="n">ND2File</span><span class="p">(</span><span class="s2">&quot;path/to/file.nd2&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">nd2_file</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<p>This will automatically close the file when the context exits.</p>
</div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Open file for reading.</span>

<span class="sd">    !!! note</span>

<span class="sd">        Files are best opened using a context manager:</span>

<span class="sd">        ```python</span>
<span class="sd">        with nd2.ND2File(&quot;path/to/file.nd2&quot;) as nd2_file:</span>
<span class="sd">            ...</span>
<span class="sd">        ```</span>

<span class="sd">        This will automatically close the file when the context exits.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rdr</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.read_frame" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">read_frame</span>


<a href="#nd2.ND2File.read_frame" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">read_frame</span><span class="p">(</span><span class="n"><span title="nd2.ND2File.read_frame(frame_index)">frame_index</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.SupportsInt" href="https://docs.python.org/3/library/typing.html#typing.SupportsInt">SupportsInt</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Read a single frame from the file, indexed by frame number.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.8.0</p>
</div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_index</span><span class="p">:</span> <span class="n">SupportsInt</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read a single frame from the file, indexed by frame number.</span>

<span class="sd">    !!! Tip &quot;new in version 0.8.0&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rdr</span><span class="o">.</span><span class="n">read_frame</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">frame_index</span><span class="p">))</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raw_frame_shape</span>
    <span class="k">return</span> <span class="n">frame</span><span class="o">.</span><span class="n">transpose</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.to_dask" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">to_dask</span>


<a href="#nd2.ND2File.to_dask" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_dask</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="wrapper (nd2.ND2File.to_dask(wrapper))" href="#nd2.ND2File.to_dask(wrapper)">wrapper</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="copy (nd2.ND2File.to_dask(copy))" href="#nd2.ND2File.to_dask(copy)">copy</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="dask.array.core.Array" href="https://docs.dask.org/en/stable/generated/dask.array.Array.html#dask.array.Array">Array</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create dask array (delayed reader) representing image.</p>
<p>This generally works well, but it remains to be seen whether performance
is optimized, or if we're duplicating safety mechanisms. You may try
various combinations of <code>wrapper</code> and <code>copy</code>, setting both to <code>False</code>
will very likely cause segmentation faults in many cases.  But setting
one of them to <code>False</code>, may slightly improve read speed in certain
cases.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.to_dask(wrapper)" class="doc doc-heading doc-heading-parameter">              <b><code>wrapper</code></b>
<a href="#nd2.ND2File.to_dask(wrapper)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If <code>True</code> (the default), the returned object will be a thin subclass of a
<a class="autorefs autorefs-external" href="https://docs.dask.org/en/stable/generated/dask.array.Array.html#dask.array.Array"><code>dask.array.Array</code></a> (a <code>ResourceBackedDaskArray</code>) that manages the
opening and closing of this file when getting chunks via compute(). If
<code>wrapper</code> is <code>False</code>, then a pure <code>dask.array.core.Array</code> will be returned.
However, when that array is computed, it will incur a file open/close on
<em>every</em> chunk that is read (in the <code>_dask_block</code> method).  As such <code>wrapper</code>
will generally be much faster, however, it <em>may</em> fail (i.e. result in
segmentation faults) with certain dask schedulers.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.to_dask(copy)" class="doc doc-heading doc-heading-parameter">              <b><code>copy</code></b>
<a href="#nd2.ND2File.to_dask(copy)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If <code>True</code> (the default), the dask chunk-reading function will return
an array copy. This can avoid segfaults in certain cases, though it
may also add overhead.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<b><code>dask_array</code></b> (              <code><a class="autorefs autorefs-external" title="dask.array.Array" href="https://docs.dask.org/en/stable/generated/dask.array.Array.html#dask.array.Array">Array</a></code>
)          –
          <div class="doc-md-description">
            <p>A dask array representing the image data.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wrapper</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">copy</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">dask</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create dask array (delayed reader) representing image.</span>

<span class="sd">    This generally works well, but it remains to be seen whether performance</span>
<span class="sd">    is optimized, or if we&#39;re duplicating safety mechanisms. You may try</span>
<span class="sd">    various combinations of `wrapper` and `copy`, setting both to `False`</span>
<span class="sd">    will very likely cause segmentation faults in many cases.  But setting</span>
<span class="sd">    one of them to `False`, may slightly improve read speed in certain</span>
<span class="sd">    cases.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    wrapper : bool</span>
<span class="sd">        If `True` (the default), the returned object will be a thin subclass of a</span>
<span class="sd">        [`dask.array.Array`][] (a `ResourceBackedDaskArray`) that manages the</span>
<span class="sd">        opening and closing of this file when getting chunks via compute(). If</span>
<span class="sd">        `wrapper` is `False`, then a pure `dask.array.core.Array` will be returned.</span>
<span class="sd">        However, when that array is computed, it will incur a file open/close on</span>
<span class="sd">        *every* chunk that is read (in the `_dask_block` method).  As such `wrapper`</span>
<span class="sd">        will generally be much faster, however, it *may* fail (i.e. result in</span>
<span class="sd">        segmentation faults) with certain dask schedulers.</span>
<span class="sd">    copy : bool</span>
<span class="sd">        If `True` (the default), the dask chunk-reading function will return</span>
<span class="sd">        an array copy. This can avoid segfaults in certain cases, though it</span>
<span class="sd">        may also add overhead.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dask_array: dask.array.Array</span>
<span class="sd">        A dask array representing the image data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">dask.array.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">map_blocks</span>

    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,)</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coord_shape</span><span class="p">]</span>
    <span class="n">chunks</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_shape</span><span class="p">]</span>
    <span class="n">dask_arr</span> <span class="o">=</span> <span class="n">map_blocks</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dask_block</span><span class="p">,</span>
        <span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">,</span>
        <span class="n">chunks</span><span class="o">=</span><span class="n">chunks</span><span class="p">,</span>
        <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">wrapper</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">resource_backed_dask_array</span><span class="w"> </span><span class="kn">import</span> <span class="n">ResourceBackedDaskArray</span>

        <span class="c1"># this subtype allows the dask array to re-open the underlying</span>
        <span class="c1"># nd2 file on compute.</span>
        <span class="k">return</span> <span class="n">ResourceBackedDaskArray</span><span class="o">.</span><span class="n">from_array</span><span class="p">(</span><span class="n">dask_arr</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dask_arr</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.to_xarray" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">to_xarray</span>


<a href="#nd2.ND2File.to_xarray" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_xarray</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="delayed (nd2.ND2File.to_xarray(delayed))" href="#nd2.ND2File.to_xarray(delayed)">delayed</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="squeeze (nd2.ND2File.to_xarray(squeeze))" href="#nd2.ND2File.to_xarray(squeeze)">squeeze</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="position (nd2.ND2File.to_xarray(position))" href="#nd2.ND2File.to_xarray(position)">position</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="copy (nd2.ND2File.to_xarray(copy))" href="#nd2.ND2File.to_xarray(copy)">copy</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="xarray.DataArray" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray">DataArray</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return a labeled <a class="autorefs autorefs-external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray">xarray.DataArray</a> representing image.</p>
<p>Xarrays are a powerful way to label and manipulate n-dimensional data with
axis-associated coordinates.</p>
<p><code>array.dims</code> will be populated according to image metadata, and coordinates
will be populated based on pixel spacings. Additional metadata is available
in <code>array.attrs['metadata']</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.to_xarray(delayed)" class="doc doc-heading doc-heading-parameter">              <b><code>delayed</code></b>
<a href="#nd2.ND2File.to_xarray(delayed)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Whether the DataArray should be backed by dask array or numpy array,
by default True (dask).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.to_xarray(squeeze)" class="doc doc-heading doc-heading-parameter">              <b><code>squeeze</code></b>
<a href="#nd2.ND2File.to_xarray(squeeze)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to squeeze singleton dimensions, by default True</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.to_xarray(position)" class="doc doc-heading doc-heading-parameter">              <b><code>position</code></b>
<a href="#nd2.ND2File.to_xarray(position)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A specific XY position to extract, by default (None) reads all.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.to_xarray(copy)" class="doc doc-heading doc-heading-parameter">              <b><code>copy</code></b>
<a href="#nd2.ND2File.to_xarray(copy)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Only applies when <code>delayed==True</code>.  See <code>to_dask</code> for details.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" title="xarray.DataArray" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray">DataArray</a></code>
          –
          <div class="doc-md-description">
            <p>xarray with all axes labeled.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_xarray</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">delayed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">squeeze</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">copy</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a labeled [xarray.DataArray][] representing image.</span>

<span class="sd">    Xarrays are a powerful way to label and manipulate n-dimensional data with</span>
<span class="sd">    axis-associated coordinates.</span>

<span class="sd">    `array.dims` will be populated according to image metadata, and coordinates</span>
<span class="sd">    will be populated based on pixel spacings. Additional metadata is available</span>
<span class="sd">    in `array.attrs[&#39;metadata&#39;]`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    delayed : bool</span>
<span class="sd">        Whether the DataArray should be backed by dask array or numpy array,</span>
<span class="sd">        by default True (dask).</span>
<span class="sd">    squeeze : bool</span>
<span class="sd">        Whether to squeeze singleton dimensions, by default True</span>
<span class="sd">    position : int, optional</span>
<span class="sd">        A specific XY position to extract, by default (None) reads all.</span>
<span class="sd">    copy : bool</span>
<span class="sd">        Only applies when `delayed==True`.  See `to_dask` for details.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    xr.DataArray</span>
<span class="sd">        xarray with all axes labeled.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>

    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dask</span><span class="p">(</span><span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">)</span> <span class="k">if</span> <span class="n">delayed</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
    <span class="n">dims</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sizes</span><span class="p">)</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expand_coords</span><span class="p">(</span><span class="n">squeeze</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">squeeze</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">missing_dim</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">dims</span><span class="p">):</span>
            <span class="n">dims</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">missing_dim</span><span class="p">)</span>
        <span class="n">missing_axes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dims</span><span class="p">)</span> <span class="o">-</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span>
        <span class="k">if</span> <span class="n">missing_axes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[(</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">,)</span> <span class="o">*</span> <span class="n">missing_axes</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">delayed</span> <span class="ow">and</span> <span class="n">AXIS</span><span class="o">.</span><span class="n">POSITION</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
        <span class="c1"># if it&#39;s delayed, we do this using isel below instead.</span>
        <span class="n">coords</span><span class="p">[</span><span class="n">AXIS</span><span class="o">.</span><span class="n">POSITION</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="n">AXIS</span><span class="o">.</span><span class="n">POSITION</span><span class="p">][</span><span class="n">position</span><span class="p">]]</span>

    <span class="n">x</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">dims</span><span class="o">=</span><span class="n">dims</span><span class="p">,</span>
        <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
        <span class="n">attrs</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
                <span class="s2">&quot;experiment&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">experiment</span><span class="p">,</span>
                <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="p">,</span>
                <span class="s2">&quot;text_info&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_info</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">},</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">delayed</span> <span class="ow">and</span> <span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">AXIS</span><span class="o">.</span><span class="n">POSITION</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">isel</span><span class="p">({</span><span class="n">AXIS</span><span class="o">.</span><span class="n">POSITION</span><span class="p">:</span> <span class="p">[</span><span class="n">position</span><span class="p">]})</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span> <span class="k">if</span> <span class="n">squeeze</span> <span class="k">else</span> <span class="n">x</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.unstructured_metadata" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">unstructured_metadata</span>


<a href="#nd2.ND2File.unstructured_metadata" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">unstructured_metadata</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="strip_prefix (nd2.ND2File.unstructured_metadata(strip_prefix))" href="#nd2.ND2File.unstructured_metadata(strip_prefix)">strip_prefix</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="include (nd2.ND2File.unstructured_metadata(include))" href="#nd2.ND2File.unstructured_metadata(include)">include</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#set">set</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="exclude (nd2.ND2File.unstructured_metadata(exclude))" href="#nd2.ND2File.unstructured_metadata(exclude)">exclude</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#set">set</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Exposes, and attempts to decode, each metadata chunk in the file.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.4.3</p>
</div>
<p>This is provided as a <em>experimental</em> fallback in the event that
<code>ND2File.experiment</code> does not contain all of the information you need. No
attempt is made to parse or validate the metadata, and the format of various
sections, <em>may</em> change in future versions of nd2. Consumption of this metadata
should use appropriate exception handling!</p>
<p>The 'ImageMetadataLV' chunk is the most likely to contain useful information,
but if you're generally looking for "hidden" metadata, it may be helpful to
look at the full output.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.unstructured_metadata(strip_prefix)" class="doc doc-heading doc-heading-parameter">              <b><code>strip_prefix</code></b>
<a href="#nd2.ND2File.unstructured_metadata(strip_prefix)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to strip the type information from the front of the keys in the
dict. For example, if <code>True</code>: <code>uiModeFQ</code> becomes <code>ModeFQ</code> and <code>bUsePFS</code>
becomes <code>UsePFS</code>, etc... by default <code>True</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.unstructured_metadata(include)" class="doc doc-heading doc-heading-parameter">              <b><code>include</code></b>
<a href="#nd2.ND2File.unstructured_metadata(include)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#set">set</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>If provided, only include the specified keys in the output. by default,
all metadata sections found in the file are included.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.unstructured_metadata(exclude)" class="doc doc-heading doc-heading-parameter">              <b><code>exclude</code></b>
<a href="#nd2.ND2File.unstructured_metadata(exclude)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#set">set</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>If provided, exclude the specified keys from the output. by default <code>None</code></p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>
          –
          <div class="doc-md-description">
            <p>A dict of the unstructured metadata, with keys that are the type of the
metadata chunk (things like 'CustomData|RoiMetadata_v1' or
'ImageMetadataLV'), and values that are associated metadata chunk.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unstructured_metadata</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">strip_prefix</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">include</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">exclude</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exposes, and attempts to decode, each metadata chunk in the file.</span>

<span class="sd">    !!! Tip &quot;new in version 0.4.3&quot;</span>

<span class="sd">    This is provided as a *experimental* fallback in the event that</span>
<span class="sd">    `ND2File.experiment` does not contain all of the information you need. No</span>
<span class="sd">    attempt is made to parse or validate the metadata, and the format of various</span>
<span class="sd">    sections, *may* change in future versions of nd2. Consumption of this metadata</span>
<span class="sd">    should use appropriate exception handling!</span>

<span class="sd">    The &#39;ImageMetadataLV&#39; chunk is the most likely to contain useful information,</span>
<span class="sd">    but if you&#39;re generally looking for &quot;hidden&quot; metadata, it may be helpful to</span>
<span class="sd">    look at the full output.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    strip_prefix : bool, optional</span>
<span class="sd">        Whether to strip the type information from the front of the keys in the</span>
<span class="sd">        dict. For example, if `True`: `uiModeFQ` becomes `ModeFQ` and `bUsePFS`</span>
<span class="sd">        becomes `UsePFS`, etc... by default `True`</span>
<span class="sd">    include : set[str] | None, optional</span>
<span class="sd">        If provided, only include the specified keys in the output. by default,</span>
<span class="sd">        all metadata sections found in the file are included.</span>
<span class="sd">    exclude : set[str] | None, optional</span>
<span class="sd">        If provided, exclude the specified keys from the output. by default `None`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict[str, Any]</span>
<span class="sd">        A dict of the unstructured metadata, with keys that are the type of the</span>
<span class="sd">        metadata chunk (things like &#39;CustomData|RoiMetadata_v1&#39; or</span>
<span class="sd">        &#39;ImageMetadataLV&#39;), and values that are associated metadata chunk.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rdr</span><span class="o">.</span><span class="n">unstructured_metadata</span><span class="p">(</span><span class="n">strip_prefix</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">exclude</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.voxel_size" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">voxel_size</span>


<a href="#nd2.ND2File.voxel_size" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">voxel_size</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="channel (nd2.ND2File.voxel_size(channel))" href="#nd2.ND2File.voxel_size(channel)">channel</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="nd2._util.VoxelSize">VoxelSize</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>XYZ voxel size in microns.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.voxel_size(channel)" class="doc doc-heading doc-heading-parameter">              <b><code>channel</code></b>
<a href="#nd2.ND2File.voxel_size(channel)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>Channel for which to retrieve voxel info, by default 0.
(Not yet implemented.)</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="VoxelSize">VoxelSize</span></code>
          –
          <div class="doc-md-description">
            <p>Named tuple with attrs <code>x</code>, <code>y</code>, and <code>z</code>.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">voxel_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_util</span><span class="o">.</span><span class="n">VoxelSize</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;XYZ voxel size in microns.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    channel : int</span>
<span class="sd">        Channel for which to retrieve voxel info, by default 0.</span>
<span class="sd">        (Not yet implemented.)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    VoxelSize</span>
<span class="sd">        Named tuple with attrs `x`, `y`, and `z`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_util</span><span class="o">.</span><span class="n">VoxelSize</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_rdr</span><span class="o">.</span><span class="n">voxel_size</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.write_ome_zarr" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">write_ome_zarr</span>


<a href="#nd2.ND2File.write_ome_zarr" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">write_ome_zarr</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="dest (nd2.ND2File.write_ome_zarr(dest))" href="#nd2.ND2File.write_ome_zarr(dest)">dest</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="chunk_shape (nd2.ND2File.write_ome_zarr(chunk_shape))" href="#nd2.ND2File.write_ome_zarr(chunk_shape)">chunk_shape</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="s2">&quot;auto&quot;</span><span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="shard_shape (nd2.ND2File.write_ome_zarr(shard_shape))" href="#nd2.ND2File.write_ome_zarr(shard_shape)">shard_shape</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="backend (nd2.ND2File.write_ome_zarr(backend))" href="#nd2.ND2File.write_ome_zarr(backend)">backend</a></span><span class="p">:</span> <span class="n"><span title="nd2._ome_zarr.ZarrBackend">ZarrBackend</span></span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="progress (nd2.ND2File.write_ome_zarr(progress))" href="#nd2.ND2File.write_ome_zarr(progress)">progress</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="position (nd2.ND2File.write_ome_zarr(position))" href="#nd2.ND2File.write_ome_zarr(position)">position</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="force_series (nd2.ND2File.write_ome_zarr(force_series))" href="#nd2.ND2File.write_ome_zarr(force_series)">force_series</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="include_all_metadata (nd2.ND2File.write_ome_zarr(include_all_metadata))" href="#nd2.ND2File.write_ome_zarr(include_all_metadata)">include_all_metadata</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="include_labels (nd2.ND2File.write_ome_zarr(include_labels))" href="#nd2.ND2File.write_ome_zarr(include_labels)">include_labels</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="version (nd2.ND2File.write_ome_zarr(version))" href="#nd2.ND2File.write_ome_zarr(version)">version</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="s2">&quot;0.5&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0.5&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="overwrite (nd2.ND2File.write_ome_zarr(overwrite))" href="#nd2.ND2File.write_ome_zarr(overwrite)">overwrite</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Export to an OME-Zarr store.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.11.0</p>
</div>
<div class="admonition important">
<p class="admonition-title">Requires extras</p>
<p>In order to use <code>write_ome_zarr</code> you must install <code>nd2</code> with an appropriate
array-writing backend.  <code>zarr-python</code> is the reference implementation,
but <code>tensorstore</code> is faster.</p>
<ul>
<li><code>pip install "nd2[ome-zarr-tensorstore]"</code> (to use tensorstore backend)</li>
<li><code>pip install "nd2[ome-zarr]"</code> (to use zarr-python backend)</li>
</ul>
</div>
<p>Creates a Zarr v3 store with OME-NGFF 0.5 compliant metadata.
Uses yaozarrs for metadata generation and either <code>zarr-python</code> or
<code>tensorstore</code> for array writing.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(dest)" class="doc doc-heading doc-heading-parameter">              <b><code>dest</code></b>
<a href="#nd2.ND2File.write_ome_zarr(dest)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a></code>)
          –
          <div class="doc-md-description">
            <p>Destination path for the Zarr store. Will be created as a directory.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(chunk_shape)" class="doc doc-heading doc-heading-parameter">              <b><code>chunk_shape</code></b>
<a href="#nd2.ND2File.write_ome_zarr(chunk_shape)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, ...] | &#39;auto&#39; | None</code>, default:
                  <code>&#39;auto&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>Shape of chunks for the output array. If "auto" (default), determines
optimal chunking based on data size. If None, uses a single chunk.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(shard_shape)" class="doc doc-heading doc-heading-parameter">              <b><code>shard_shape</code></b>
<a href="#nd2.ND2File.write_ome_zarr(shard_shape)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, ...] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Shape of shards for sharded storage. If provided, enables Zarr v3
sharding where each shard contains multiple chunks. Useful for
cloud storage to reduce number of objects.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(backend)" class="doc doc-heading doc-heading-parameter">              <b><code>backend</code></b>
<a href="#nd2.ND2File.write_ome_zarr(backend)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code>&#39;zarr&#39; | &#39;tensorstore&#39; | &#39;auto&#39;</code>, default:
                  <code>&#39;auto&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>Backend library to use for writing arrays.
- "tensorstore": Uses Google's tensorstore library
- "zarr": Uses zarr-python
- "auto": Tries to use tensorstore if installed, otherwise falls back
to zarr-python. Raises ImportError if neither is available.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(progress)" class="doc doc-heading doc-heading-parameter">              <b><code>progress</code></b>
<a href="#nd2.ND2File.write_ome_zarr(progress)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to display a progress bar during writing.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(position)" class="doc doc-heading doc-heading-parameter">              <b><code>position</code></b>
<a href="#nd2.ND2File.write_ome_zarr(position)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>If the ND2 file contains multiple positions (XY stage positions),
export only this position index. If None, exports all positions
as separate groups within the store.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(force_series)" class="doc doc-heading doc-heading-parameter">              <b><code>force_series</code></b>
<a href="#nd2.ND2File.write_ome_zarr(force_series)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, use bioformats2raw layout even for single position files.
This creates a store with OME/ directory and series metadata,
with the image in a "0/" subdirectory. Default is False.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(include_all_metadata)" class="doc doc-heading doc-heading-parameter">              <b><code>include_all_metadata</code></b>
<a href="#nd2.ND2File.write_ome_zarr(include_all_metadata)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True (default), <em>all</em> unstructured metadata chunks found in the ND2
will be included in the OME-Zarr metadata as JSON-encoded strings.
If False, only a minimal set of metadata will be included (those necessary
for the OME-NGFF specification, along with the OME-XML metadata if present).
Use <code>True</code> for maximum metadata retention, or <code>False</code> for a smaller store.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(include_labels)" class="doc doc-heading doc-heading-parameter">              <b><code>include_labels</code></b>
<a href="#nd2.ND2File.write_ome_zarr(include_labels)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True (default), export binary masks as OME-Zarr labels.
Binary masks from the ND2 file will be written to a "labels"
subdirectory within the image group. Each binary layer becomes
a separate label with its own name. Has no effect if the file
contains no binary data.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(version)" class="doc doc-heading doc-heading-parameter">              <b><code>version</code></b>
<a href="#nd2.ND2File.write_ome_zarr(version)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code>&#39;0.5&#39;</code>, default:
                  <code>&#39;0.5&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>OME-NGFF specification version to use. Currently only "0.5" is
supported. This parameter is reserved for future use.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_ome_zarr(overwrite)" class="doc doc-heading doc-heading-parameter">              <b><code>overwrite</code></b>
<a href="#nd2.ND2File.write_ome_zarr(overwrite)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, overwrite the destination if it already exists.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></code>
          –
          <div class="doc-md-description">
            <p>Path to the created Zarr store.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ImportError">ImportError</a></code>
            –
          <div class="doc-md-description">
            <p>If yaozarrs or the required backend library is not installed.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If the file contains unsupported data structures or invalid version.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Basic export:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">nd2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">nd2</span><span class="o">.</span><span class="n">ND2File</span><span class="p">(</span><span class="s2">&quot;experiment.nd2&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write_ome_zarr</span><span class="p">(</span><span class="s2">&quot;experiment.zarr&quot;</span><span class="p">)</span>
</code></pre></div>
    <p>Export with specific chunking:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">nd2</span><span class="o">.</span><span class="n">ND2File</span><span class="p">(</span><span class="s2">&quot;experiment.nd2&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write_ome_zarr</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">&quot;experiment.zarr&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">chunk_shape</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">256</span><span class="p">,</span> <span class="mi">256</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">)</span>
</code></pre></div>
    <p>Export using tensorstore backend:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">nd2</span><span class="o">.</span><span class="n">ND2File</span><span class="p">(</span><span class="s2">&quot;experiment.nd2&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">f</span><span class="o">.</span><span class="n">write_ome_zarr</span><span class="p">(</span><span class="s2">&quot;experiment.zarr&quot;</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s2">&quot;tensorstore&quot;</span><span class="p">)</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_ome_zarr</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dest</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">PathLike</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">chunk_shape</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;auto&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
    <span class="n">shard_shape</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">backend</span><span class="p">:</span> <span class="n">ZarrBackend</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
    <span class="n">progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">force_series</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">include_all_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">include_labels</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;0.5&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0.5&quot;</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Export to an OME-Zarr store.</span>

<span class="sd">    !!! Tip &quot;new in version 0.11.0&quot;</span>

<span class="sd">    !!!important &quot;Requires extras&quot;</span>
<span class="sd">        In order to use `write_ome_zarr` you must install `nd2` with an appropriate</span>
<span class="sd">        array-writing backend.  `zarr-python` is the reference implementation,</span>
<span class="sd">        but `tensorstore` is faster.</span>

<span class="sd">        - `pip install &quot;nd2[ome-zarr-tensorstore]&quot;` (to use tensorstore backend)</span>
<span class="sd">        - `pip install &quot;nd2[ome-zarr]&quot;` (to use zarr-python backend)</span>

<span class="sd">    Creates a Zarr v3 store with OME-NGFF 0.5 compliant metadata.</span>
<span class="sd">    Uses yaozarrs for metadata generation and either `zarr-python` or</span>
<span class="sd">    `tensorstore` for array writing.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dest : str | PathLike</span>
<span class="sd">        Destination path for the Zarr store. Will be created as a directory.</span>
<span class="sd">    chunk_shape : tuple[int, ...] | &quot;auto&quot; | None</span>
<span class="sd">        Shape of chunks for the output array. If &quot;auto&quot; (default), determines</span>
<span class="sd">        optimal chunking based on data size. If None, uses a single chunk.</span>
<span class="sd">    shard_shape : tuple[int, ...] | None</span>
<span class="sd">        Shape of shards for sharded storage. If provided, enables Zarr v3</span>
<span class="sd">        sharding where each shard contains multiple chunks. Useful for</span>
<span class="sd">        cloud storage to reduce number of objects.</span>
<span class="sd">    backend : &quot;zarr&quot; | &quot;tensorstore&quot; | &quot;auto&quot;</span>
<span class="sd">        Backend library to use for writing arrays.</span>
<span class="sd">        - &quot;tensorstore&quot;: Uses Google&#39;s tensorstore library</span>
<span class="sd">        - &quot;zarr&quot;: Uses zarr-python</span>
<span class="sd">        - &quot;auto&quot;: Tries to use tensorstore if installed, otherwise falls back</span>
<span class="sd">        to zarr-python. Raises ImportError if neither is available.</span>
<span class="sd">    progress : bool</span>
<span class="sd">        Whether to display a progress bar during writing.</span>
<span class="sd">    position : int | None</span>
<span class="sd">        If the ND2 file contains multiple positions (XY stage positions),</span>
<span class="sd">        export only this position index. If None, exports all positions</span>
<span class="sd">        as separate groups within the store.</span>
<span class="sd">    force_series : bool</span>
<span class="sd">        If True, use bioformats2raw layout even for single position files.</span>
<span class="sd">        This creates a store with OME/ directory and series metadata,</span>
<span class="sd">        with the image in a &quot;0/&quot; subdirectory. Default is False.</span>
<span class="sd">    include_all_metadata : bool</span>
<span class="sd">        If True (default), *all* unstructured metadata chunks found in the ND2</span>
<span class="sd">        will be included in the OME-Zarr metadata as JSON-encoded strings.</span>
<span class="sd">        If False, only a minimal set of metadata will be included (those necessary</span>
<span class="sd">        for the OME-NGFF specification, along with the OME-XML metadata if present).</span>
<span class="sd">        Use `True` for maximum metadata retention, or `False` for a smaller store.</span>
<span class="sd">    include_labels : bool</span>
<span class="sd">        If True (default), export binary masks as OME-Zarr labels.</span>
<span class="sd">        Binary masks from the ND2 file will be written to a &quot;labels&quot;</span>
<span class="sd">        subdirectory within the image group. Each binary layer becomes</span>
<span class="sd">        a separate label with its own name. Has no effect if the file</span>
<span class="sd">        contains no binary data.</span>
<span class="sd">    version : &quot;0.5&quot;</span>
<span class="sd">        OME-NGFF specification version to use. Currently only &quot;0.5&quot; is</span>
<span class="sd">        supported. This parameter is reserved for future use.</span>
<span class="sd">    overwrite : bool</span>
<span class="sd">        If True, overwrite the destination if it already exists.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Path</span>
<span class="sd">        Path to the created Zarr store.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ImportError</span>
<span class="sd">        If yaozarrs or the required backend library is not installed.</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the file contains unsupported data structures or invalid version.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Basic export:</span>

<span class="sd">    &gt;&gt;&gt; import nd2</span>
<span class="sd">    &gt;&gt;&gt; with nd2.ND2File(&quot;experiment.nd2&quot;) as f:</span>
<span class="sd">    ...     f.write_ome_zarr(&quot;experiment.zarr&quot;)</span>

<span class="sd">    Export with specific chunking:</span>

<span class="sd">    &gt;&gt;&gt; with nd2.ND2File(&quot;experiment.nd2&quot;) as f:</span>
<span class="sd">    ...     f.write_ome_zarr(</span>
<span class="sd">    ...         &quot;experiment.zarr&quot;,</span>
<span class="sd">    ...         chunk_shape=(1, 1, 64, 256, 256),</span>
<span class="sd">    ...     )</span>

<span class="sd">    Export using tensorstore backend:</span>

<span class="sd">    &gt;&gt;&gt; with nd2.ND2File(&quot;experiment.nd2&quot;) as f:</span>
<span class="sd">    ...     f.write_ome_zarr(&quot;experiment.zarr&quot;, backend=&quot;tensorstore&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">._ome_zarr</span><span class="w"> </span><span class="kn">import</span> <span class="n">nd2_to_ome_zarr</span>

    <span class="k">return</span> <span class="n">nd2_to_ome_zarr</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dest</span><span class="p">,</span>
        <span class="n">chunk_shape</span><span class="o">=</span><span class="n">chunk_shape</span><span class="p">,</span>
        <span class="n">shard_shape</span><span class="o">=</span><span class="n">shard_shape</span><span class="p">,</span>
        <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span>
        <span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="n">force_series</span><span class="o">=</span><span class="n">force_series</span><span class="p">,</span>
        <span class="n">include_all_metadata</span><span class="o">=</span><span class="n">include_all_metadata</span><span class="p">,</span>
        <span class="n">include_labels</span><span class="o">=</span><span class="n">include_labels</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nd2.ND2File.write_tiff" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">write_tiff</span>


<a href="#nd2.ND2File.write_tiff" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">write_tiff</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="dest (nd2.ND2File.write_tiff(dest))" href="#nd2.ND2File.write_tiff(dest)">dest</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="include_unstructured_metadata (nd2.ND2File.write_tiff(include_unstructured_metadata))" href="#nd2.ND2File.write_tiff(include_unstructured_metadata)">include_unstructured_metadata</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="progress (nd2.ND2File.write_tiff(progress))" href="#nd2.ND2File.write_tiff(progress)">progress</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="on_frame (nd2.ND2File.write_tiff(on_frame))" href="#nd2.ND2File.write_tiff(on_frame)">on_frame</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="modify_ome (nd2.ND2File.write_tiff(modify_ome))" href="#nd2.ND2File.write_tiff(modify_ome)">modify_ome</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-external" title="ome_types.OME" href="https://ome-types.readthedocs.io/en/latest/API/ome_types/#ome_types.OME">OME</a></span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Export to an (OME)-TIFF file.</p>
<div class="admonition tip">
<p class="admonition-title">new in version 0.10.0</p>
</div>
<p>To include OME-XML metadata, use extension <code>.ome.tif</code> or <code>.ome.tiff</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_tiff(dest)" class="doc doc-heading doc-heading-parameter">              <b><code>dest</code></b>
<a href="#nd2.ND2File.write_tiff(dest)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a></code>)
          –
          <div class="doc-md-description">
            <p>The destination TIFF file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_tiff(include_unstructured_metadata)" class="doc doc-heading doc-heading-parameter">              <b><code>include_unstructured_metadata</code></b>
<a href="#nd2.ND2File.write_tiff(include_unstructured_metadata)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code> bool</code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to include unstructured metadata in the OME-XML.
This includes all of the metadata that we can find in the ND2 file in the
StructuredAnnotations section of the OME-XML (as mapping of
metadata chunk name to JSON-encoded string). By default <code>True</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_tiff(progress)" class="doc doc-heading doc-heading-parameter">              <b><code>progress</code></b>
<a href="#nd2.ND2File.write_tiff(progress)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to display progress bar.  If <code>True</code> and <code>tqdm</code> is installed, it will
be used. Otherwise, a simple text counter will be printed to the console.
By default <code>False</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_tiff(on_frame)" class="doc doc-heading doc-heading-parameter">              <b><code>on_frame</code></b>
<a href="#nd2.ND2File.write_tiff(on_frame)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]], None] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A function to call after each frame is written. The function should accept
three arguments: the current frame number, the total number of frames, and
a dictionary of the current frame's indices (e.g. <code>{"T": 0, "Z": 1}</code>)
(Useful for integrating custom progress bars or logging.)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="nd2.ND2File.write_tiff(modify_ome)" class="doc doc-heading doc-heading-parameter">              <b><code>modify_ome</code></b>
<a href="#nd2.ND2File.write_tiff(modify_ome)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[[<a class="autorefs autorefs-external" title="ome_types.OME" href="https://ome-types.readthedocs.io/en/latest/API/ome_types/#ome_types.OME">OME</a>], None]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A function to modify the OME metadata before writing it to the file.
Accepts an <code>ome_types.OME</code> object and should modify it in place.
(reminder: OME-XML is only written if the file extension is <code>.ome.tif</code> or
<code>.ome.tiff</code>)</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_tiff</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dest</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">PathLike</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">include_unstructured_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">on_frame</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">modify_ome</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">ome_types</span><span class="o">.</span><span class="n">OME</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Export to an (OME)-TIFF file.</span>

<span class="sd">    !!! Tip &quot;new in version 0.10.0&quot;</span>

<span class="sd">    To include OME-XML metadata, use extension `.ome.tif` or `.ome.tiff`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dest : str  | PathLike</span>
<span class="sd">        The destination TIFF file.</span>
<span class="sd">    include_unstructured_metadata :  bool</span>
<span class="sd">        Whether to include unstructured metadata in the OME-XML.</span>
<span class="sd">        This includes all of the metadata that we can find in the ND2 file in the</span>
<span class="sd">        StructuredAnnotations section of the OME-XML (as mapping of</span>
<span class="sd">        metadata chunk name to JSON-encoded string). By default `True`.</span>
<span class="sd">    progress : bool</span>
<span class="sd">        Whether to display progress bar.  If `True` and `tqdm` is installed, it will</span>
<span class="sd">        be used. Otherwise, a simple text counter will be printed to the console.</span>
<span class="sd">        By default `False`.</span>
<span class="sd">    on_frame : Callable[[int, int, dict[str, int]], None] | None</span>
<span class="sd">        A function to call after each frame is written. The function should accept</span>
<span class="sd">        three arguments: the current frame number, the total number of frames, and</span>
<span class="sd">        a dictionary of the current frame&#39;s indices (e.g. `{&quot;T&quot;: 0, &quot;Z&quot;: 1}`)</span>
<span class="sd">        (Useful for integrating custom progress bars or logging.)</span>
<span class="sd">    modify_ome : Callable[[ome_types.OME], None]</span>
<span class="sd">        A function to modify the OME metadata before writing it to the file.</span>
<span class="sd">        Accepts an `ome_types.OME` object and should modify it in place.</span>
<span class="sd">        (reminder: OME-XML is only written if the file extension is `.ome.tif` or</span>
<span class="sd">        `.ome.tiff`)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">.tiff</span><span class="w"> </span><span class="kn">import</span> <span class="n">nd2_to_tiff</span>

    <span class="k">return</span> <span class="n">nd2_to_tiff</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dest</span><span class="p">,</span>
        <span class="n">include_unstructured_metadata</span><span class="o">=</span><span class="n">include_unstructured_metadata</span><span class="p">,</span>
        <span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span>
        <span class="n">on_frame</span><span class="o">=</span><span class="n">on_frame</span><span class="p">,</span>
        <span class="n">modify_ome</span><span class="o">=</span><span class="n">modify_ome</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="nd2.imread" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">imread</span>


<a href="#nd2.imread" class="headerlink" title="Permanent link">&para;</a></h2>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">imread</span><span class="p">(</span>
    <span class="n"><span title="nd2._nd2file.imread(file)">file</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><span title="nd2._nd2file.imread(dask)">dask</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n"><span title="nd2._nd2file.imread(xarray)">xarray</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n"><span title="nd2._nd2file.imread(validate_frames)">validate_frames</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">imread</span><span class="p">(</span>
    <span class="n"><span title="nd2._nd2file.imread(file)">file</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><span title="nd2._nd2file.imread(dask)">dask</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n"><span title="nd2._nd2file.imread(xarray)">xarray</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="kc">True</span><span class="p">],</span>
    <span class="n"><span title="nd2._nd2file.imread(validate_frames)">validate_frames</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="xarray.DataArray" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray">DataArray</a></span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">imread</span><span class="p">(</span>
    <span class="n"><span title="nd2._nd2file.imread(file)">file</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><span title="nd2._nd2file.imread(dask)">dask</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="kc">True</span><span class="p">],</span>
    <span class="n"><span title="nd2._nd2file.imread(xarray)">xarray</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n"><span title="nd2._nd2file.imread(validate_frames)">validate_frames</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="dask.array.core.Array" href="https://docs.dask.org/en/stable/generated/dask.array.Array.html#dask.array.Array">Array</a></span>
</code></pre></div>          </div>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">imread</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="file (nd2.imread(file))" href="#nd2.imread(file)">file</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="dask (nd2.imread(dask))" href="#nd2.imread(dask)">dask</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="xarray (nd2.imread(xarray))" href="#nd2.imread(xarray)">xarray</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="validate_frames (nd2.imread(validate_frames))" href="#nd2.imread(validate_frames)">validate_frames</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="xarray.DataArray" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray">DataArray</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="dask.array.core.Array" href="https://docs.dask.org/en/stable/generated/dask.array.Array.html#dask.array.Array">Array</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Open <code>file</code>, return requested array type, and close <code>file</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="nd2.imread(file)" class="doc doc-heading doc-heading-parameter">              <b><code>file</code></b>
<a href="#nd2.imread(file)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>Filepath (<code>str</code>) or <code>Path</code> object to ND2 file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.imread(dask)" class="doc doc-heading doc-heading-parameter">              <b><code>dask</code></b>
<a href="#nd2.imread(dask)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If <code>True</code>, returns a (delayed) <code>dask.array.Array</code>. This will avoid reading
any data from disk until specifically requested by using <code>.compute()</code> or
casting to a numpy array with <code>np.asarray()</code>. By default <code>False</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.imread(xarray)" class="doc doc-heading doc-heading-parameter">              <b><code>xarray</code></b>
<a href="#nd2.imread(xarray)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If <code>True</code>, returns an <code>xarray.DataArray</code>, <code>array.dims</code> will be populated
according to image metadata, and coordinates will be populated based on pixel
spacings. Additional metadata is available in <code>array.attrs['metadata']</code>.
If <code>dask</code> is also <code>True</code>, will return an xarray backed by a delayed dask array.
By default <code>False</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.imread(validate_frames)" class="doc doc-heading doc-heading-parameter">              <b><code>validate_frames</code></b>
<a href="#nd2.imread(validate_frames)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to verify (and attempt to fix) frames whose positions have been
shifted relative to the predicted offset (i.e. in a corrupted file).
This comes at a slight performance penalty at file open, but may "rescue"
some corrupt files. by default False.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="Union">Union</span>[<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <a class="autorefs autorefs-external" title="dask.array.Array" href="https://docs.dask.org/en/stable/generated/dask.array.Array.html#dask.array.Array">Array</a>, <a class="autorefs autorefs-external" title="xarray.DataArray" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray">DataArray</a>]</code>
          –
          <div class="doc-md-description">
            <p>Array subclass, depending on arguments used.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_nd2file.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">imread</span><span class="p">(</span>
    <span class="n">file</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">dask</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">xarray</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">validate_frames</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">|</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span> <span class="o">|</span> <span class="n">dask</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Open `file`, return requested array type, and close `file`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    file : Path | str</span>
<span class="sd">        Filepath (`str`) or `Path` object to ND2 file.</span>
<span class="sd">    dask : bool</span>
<span class="sd">        If `True`, returns a (delayed) `dask.array.Array`. This will avoid reading</span>
<span class="sd">        any data from disk until specifically requested by using `.compute()` or</span>
<span class="sd">        casting to a numpy array with `np.asarray()`. By default `False`.</span>
<span class="sd">    xarray : bool</span>
<span class="sd">        If `True`, returns an `xarray.DataArray`, `array.dims` will be populated</span>
<span class="sd">        according to image metadata, and coordinates will be populated based on pixel</span>
<span class="sd">        spacings. Additional metadata is available in `array.attrs[&#39;metadata&#39;]`.</span>
<span class="sd">        If `dask` is also `True`, will return an xarray backed by a delayed dask array.</span>
<span class="sd">        By default `False`.</span>
<span class="sd">    validate_frames : bool</span>
<span class="sd">        Whether to verify (and attempt to fix) frames whose positions have been</span>
<span class="sd">        shifted relative to the predicted offset (i.e. in a corrupted file).</span>
<span class="sd">        This comes at a slight performance penalty at file open, but may &quot;rescue&quot;</span>
<span class="sd">        some corrupt files. by default False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Union[np.ndarray, dask.array.Array, xarray.DataArray]</span>
<span class="sd">        Array subclass, depending on arguments used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">ND2File</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">validate_frames</span><span class="o">=</span><span class="n">validate_frames</span><span class="p">)</span> <span class="k">as</span> <span class="n">nd2</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">xarray</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">nd2</span><span class="o">.</span><span class="n">to_xarray</span><span class="p">(</span><span class="n">delayed</span><span class="o">=</span><span class="n">dask</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">dask</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">nd2</span><span class="o">.</span><span class="n">to_dask</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">nd2</span><span class="o">.</span><span class="n">asarray</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="nd2.is_legacy" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">is_legacy</span>


<a href="#nd2.is_legacy" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_legacy</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="path (nd2.is_legacy(path))" href="#nd2.is_legacy(path)">path</a></span><span class="p">:</span> <span class="n"><span title="nd2._util.StrOrPath">StrOrPath</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return <code>True</code> if <code>path</code> is a legacy ND2 file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="nd2.is_legacy(path)" class="doc doc-heading doc-heading-parameter">              <b><code>path</code></b>
<a href="#nd2.is_legacy(path)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a>, <a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a>]</code>)
          –
          <div class="doc-md-description">
            <p>A path to query</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
          –
          <div class="doc-md-description">
            <p>Whether the file is a legacy ND2 file.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_util.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_legacy</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">StrOrPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return `True` if `path` is a legacy ND2 file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path : Union[str, bytes, PathLike]</span>
<span class="sd">        A path to query</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bool</span>
<span class="sd">        Whether the file is a legacy ND2 file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="n">OLD_HEADER_MAGIC</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="nd2.is_supported_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">is_supported_file</span>


<a href="#nd2.is_supported_file" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_supported_file</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="path (nd2.is_supported_file(path))" href="#nd2.is_supported_file(path)">path</a></span><span class="p">:</span> <span class="n"><span title="nd2._util.FileOrBinaryIO">FileOrBinaryIO</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="open_ (nd2.is_supported_file(open_))" href="#nd2.is_supported_file(open_)">open_</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a></span><span class="p">[[</span><span class="n"><span title="nd2._util.StrOrPath">StrOrPath</span></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="typing.BinaryIO" href="https://docs.python.org/3/library/typing.html#typing.BinaryIO">BinaryIO</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="nd2._util._open_binary">_open_binary</span></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return <code>True</code> if <code>path</code> can be opened as an nd2 file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="nd2.is_supported_file(path)" class="doc doc-heading doc-heading-parameter">              <b><code>path</code></b>
<a href="#nd2.is_supported_file(path)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a>, <a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a>]</code>)
          –
          <div class="doc-md-description">
            <p>A path to query</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.is_supported_file(open_)" class="doc doc-heading doc-heading-parameter">              <b><code>open_</code></b>
<a href="#nd2.is_supported_file(open_)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[[<span title="StrOrBytesPath">StrOrBytesPath</span>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>], <a class="autorefs autorefs-external" title="typing.BinaryIO" href="https://docs.python.org/3/library/typing.html#typing.BinaryIO">BinaryIO</a>]</code>, default:
                  <code><span title="nd2._util._open_binary">_open_binary</span></code>
)
          –
          <div class="doc-md-description">
            <p>Filesystem opener, by default <code>builtins.open</code></p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
          –
          <div class="doc-md-description">
            <p>Whether the can be opened.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_util.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_supported_file</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">FileOrBinaryIO</span><span class="p">,</span>
    <span class="n">open_</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">StrOrPath</span><span class="p">],</span> <span class="n">BinaryIO</span><span class="p">]</span> <span class="o">=</span> <span class="n">_open_binary</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return `True` if `path` can be opened as an nd2 file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path : Union[str, bytes, PathLike]</span>
<span class="sd">        A path to query</span>
<span class="sd">    open_ : Callable[[StrOrBytesPath, str], BinaryIO]</span>
<span class="sd">        Filesystem opener, by default `builtins.open`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bool</span>
<span class="sd">        Whether the can be opened.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;BinaryIO&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="n">path</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">magic</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">open_</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
            <span class="n">magic</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">magic</span> <span class="ow">in</span> <span class="p">(</span><span class="n">NEW_HEADER_MAGIC</span><span class="p">,</span> <span class="n">OLD_HEADER_MAGIC</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="nd2.nd2_to_tiff" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">nd2_to_tiff</span>


<a href="#nd2.nd2_to_tiff" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">nd2_to_tiff</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="source (nd2.nd2_to_tiff(source))" href="#nd2.nd2_to_tiff(source)">source</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-internal" title="            ND2File (nd2._nd2file.ND2File)" href="#nd2.ND2File">ND2File</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="dest (nd2.nd2_to_tiff(dest))" href="#nd2.nd2_to_tiff(dest)">dest</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="include_unstructured_metadata (nd2.nd2_to_tiff(include_unstructured_metadata))" href="#nd2.nd2_to_tiff(include_unstructured_metadata)">include_unstructured_metadata</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="progress (nd2.nd2_to_tiff(progress))" href="#nd2.nd2_to_tiff(progress)">progress</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="on_frame (nd2.nd2_to_tiff(on_frame))" href="#nd2.nd2_to_tiff(on_frame)">on_frame</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="modify_ome (nd2.nd2_to_tiff(modify_ome))" href="#nd2.nd2_to_tiff(modify_ome)">modify_ome</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-external" title="ome_types.OME" href="https://ome-types.readthedocs.io/en/latest/API/ome_types/#ome_types.OME">OME</a></span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Export an ND2 file to an (OME)-TIFF file.</p>
<p>To include OME-XML metadata, use extension <code>.ome.tif</code> or <code>.ome.tiff</code>.</p>
<p><a href="https://docs.openmicroscopy.org/ome-model/6.3.1/ome-tiff/specification.html">https://docs.openmicroscopy.org/ome-model/6.3.1/ome-tiff/specification.html</a></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="nd2.nd2_to_tiff(source)" class="doc doc-heading doc-heading-parameter">              <b><code>source</code></b>
<a href="#nd2.nd2_to_tiff(source)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a> | <a class="autorefs autorefs-internal" title="            ND2File (nd2._nd2file.ND2File)" href="#nd2.ND2File">ND2File</a></code>)
          –
          <div class="doc-md-description">
            <p>The ND2 file path or an open ND2File object.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.nd2_to_tiff(dest)" class="doc doc-heading doc-heading-parameter">              <b><code>dest</code></b>
<a href="#nd2.nd2_to_tiff(dest)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a></code>)
          –
          <div class="doc-md-description">
            <p>The destination TIFF file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.nd2_to_tiff(include_unstructured_metadata)" class="doc doc-heading doc-heading-parameter">              <b><code>include_unstructured_metadata</code></b>
<a href="#nd2.nd2_to_tiff(include_unstructured_metadata)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code> bool</code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to include unstructured metadata in the OME-XML. This includes all of
the metadata that we can find in the ND2 file in the StructuredAnnotations
section of the OME-XML (as mapping of metadata chunk name to JSON-encoded
string). By default <code>True</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.nd2_to_tiff(progress)" class="doc doc-heading doc-heading-parameter">              <b><code>progress</code></b>
<a href="#nd2.nd2_to_tiff(progress)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to display progress bar.  If <code>True</code> and <code>tqdm</code> is installed, it will
be used. Otherwise, a simple text counter will be printed to the console.
By default <code>False</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.nd2_to_tiff(on_frame)" class="doc doc-heading doc-heading-parameter">              <b><code>on_frame</code></b>
<a href="#nd2.nd2_to_tiff(on_frame)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]], None] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A function to call after each frame is written. The function should accept
three arguments: the current frame number, the total number of frames, and
a dictionary of the current frame's indices (e.g. <code>{"T": 0, "Z": 1}</code>)
(Useful for integrating custom progress bars or logging.)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.nd2_to_tiff(modify_ome)" class="doc doc-heading doc-heading-parameter">              <b><code>modify_ome</code></b>
<a href="#nd2.nd2_to_tiff(modify_ome)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[[<a class="autorefs autorefs-external" title="ome_types.OME" href="https://ome-types.readthedocs.io/en/latest/API/ome_types/#ome_types.OME">OME</a>], None]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A function to modify the OME metadata before writing it to the file.
Accepts an <code>ome_types.OME</code> object and should modify it in place.
(reminder: OME-XML is only written if the file extension is <code>.ome.tif</code> or
<code>.ome.tiff</code>)</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/tiff.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">nd2_to_tiff</span><span class="p">(</span>
    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">PathLike</span> <span class="o">|</span> <span class="n">ND2File</span><span class="p">,</span>
    <span class="n">dest</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">PathLike</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">include_unstructured_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">on_frame</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">modify_ome</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">ome_types</span><span class="o">.</span><span class="n">OME</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Export an ND2 file to an (OME)-TIFF file.</span>

<span class="sd">    To include OME-XML metadata, use extension `.ome.tif` or `.ome.tiff`.</span>

<span class="sd">    &lt;https://docs.openmicroscopy.org/ome-model/6.3.1/ome-tiff/specification.html&gt;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    source : str | PathLike | ND2File</span>
<span class="sd">        The ND2 file path or an open ND2File object.</span>
<span class="sd">    dest : str  | PathLike</span>
<span class="sd">        The destination TIFF file.</span>
<span class="sd">    include_unstructured_metadata :  bool</span>
<span class="sd">        Whether to include unstructured metadata in the OME-XML. This includes all of</span>
<span class="sd">        the metadata that we can find in the ND2 file in the StructuredAnnotations</span>
<span class="sd">        section of the OME-XML (as mapping of metadata chunk name to JSON-encoded</span>
<span class="sd">        string). By default `True`.</span>
<span class="sd">    progress : bool</span>
<span class="sd">        Whether to display progress bar.  If `True` and `tqdm` is installed, it will</span>
<span class="sd">        be used. Otherwise, a simple text counter will be printed to the console.</span>
<span class="sd">        By default `False`.</span>
<span class="sd">    on_frame : Callable[[int, int, dict[str, int]], None] | None</span>
<span class="sd">        A function to call after each frame is written. The function should accept</span>
<span class="sd">        three arguments: the current frame number, the total number of frames, and</span>
<span class="sd">        a dictionary of the current frame&#39;s indices (e.g. `{&quot;T&quot;: 0, &quot;Z&quot;: 1}`)</span>
<span class="sd">        (Useful for integrating custom progress bars or logging.)</span>
<span class="sd">    modify_ome : Callable[[ome_types.OME], None]</span>
<span class="sd">        A function to modify the OME metadata before writing it to the file.</span>
<span class="sd">        Accepts an `ome_types.OME` object and should modify it in place.</span>
<span class="sd">        (reminder: OME-XML is only written if the file extension is `.ome.tif` or</span>
<span class="sd">        `.ome.tiff`)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dest_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">dest</span><span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
    <span class="n">output_ome</span> <span class="o">=</span> <span class="s2">&quot;.ome.&quot;</span> <span class="ow">in</span> <span class="n">dest_path</span><span class="o">.</span><span class="n">name</span>

    <span class="c1"># normalize source to an open ND2File, and remember if we opened it</span>
    <span class="n">close_when_done</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">PathLike</span><span class="p">)):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">._nd2file</span><span class="w"> </span><span class="kn">import</span> <span class="n">ND2File</span>

        <span class="n">nd2f</span> <span class="o">=</span> <span class="n">ND2File</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="n">close_when_done</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">nd2f</span> <span class="o">=</span> <span class="n">source</span>
        <span class="k">if</span> <span class="n">close_when_done</span> <span class="o">:=</span> <span class="n">nd2f</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="n">nd2f</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># map of axis_name -&gt; size</span>
        <span class="n">sizes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">nd2f</span><span class="o">.</span><span class="n">sizes</span><span class="p">)</span>

        <span class="c1"># pop the number of positions from the sizes.</span>
        <span class="c1"># The OME data model does best with 5D data, so we&#39;ll write multi-5D series</span>
        <span class="n">n_positions</span> <span class="o">=</span> <span class="n">sizes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">AXIS</span><span class="o">.</span><span class="n">POSITION</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># join axis names as a string, and get shape of the data without positions</span>
        <span class="n">axes</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">sizes</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="c1"># U (Unknown) -&gt; Q : other (OME)</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;axes&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">AXIS</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">,</span> <span class="s2">&quot;Q&quot;</span><span class="p">)}</span>

        <span class="c1"># Create OME-XML</span>
        <span class="n">ome_xml</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">output_ome</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">nd2f</span><span class="o">.</span><span class="n">is_legacy</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s2">&quot;Cannot write OME metadata for legacy nd2 files.&quot;</span>
                    <span class="s2">&quot;Please use a different file extension to avoid confusion&quot;</span><span class="p">,</span>
                    <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># get the OME metadata object from the ND2File</span>
                <span class="n">ome</span> <span class="o">=</span> <span class="n">nd2_ome_metadata</span><span class="p">(</span>
                    <span class="n">nd2f</span><span class="p">,</span>
                    <span class="n">include_unstructured</span><span class="o">=</span><span class="n">include_unstructured_metadata</span><span class="p">,</span>
                    <span class="n">tiff_file_name</span><span class="o">=</span><span class="n">dest_path</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">modify_ome</span><span class="p">:</span>
                    <span class="c1"># allow user to modify the OME metadata if they want</span>
                    <span class="n">modify_ome</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span>
                <span class="n">ome_xml</span> <span class="o">=</span> <span class="n">ome</span><span class="o">.</span><span class="n">to_xml</span><span class="p">(</span><span class="n">exclude_unset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>

        <span class="c1"># total number of frames we will write</span>
        <span class="n">tot</span> <span class="o">=</span> <span class="n">nd2f</span><span class="o">.</span><span class="n">_frame_count</span>
        <span class="c1"># create a progress bar if requested</span>
        <span class="n">pbar</span> <span class="o">=</span> <span class="n">_pbar</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="n">tot</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">nd2f</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">progress</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># `p_groups` will be a map of {position index -&gt; [(frame_number, f_index) ...]}</span>
        <span class="c1"># where frame_number is passed to read_frame</span>
        <span class="c1"># and f_index is a map of axis name to index (e.g. {&quot;T&quot;: 0, &quot;Z&quot;: 1})</span>
        <span class="c1"># positions are grouped together so we can write them to the tiff file in order</span>
        <span class="n">p_groups</span><span class="p">:</span> <span class="n">defaultdict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">f_num</span><span class="p">,</span> <span class="n">f_index</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nd2f</span><span class="o">.</span><span class="n">loop_indices</span><span class="p">):</span>
            <span class="n">p_groups</span><span class="p">[</span><span class="n">f_index</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">AXIS</span><span class="o">.</span><span class="n">POSITION</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">f_num</span><span class="p">,</span> <span class="n">f_index</span><span class="p">))</span>

        <span class="c1"># create a function to iterate over all frames, updating pbar if requested</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">position_iter</span><span class="p">(</span><span class="n">p</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Iterator over frames for a given position.&quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">f_num</span><span class="p">,</span> <span class="n">f_index</span> <span class="ow">in</span> <span class="n">p_groups</span><span class="p">[</span><span class="n">p</span><span class="p">]:</span>
                <span class="c1"># call on_frame callback if provided</span>
                <span class="k">if</span> <span class="n">on_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">on_frame</span><span class="p">(</span><span class="n">f_num</span><span class="p">,</span> <span class="n">tot</span><span class="p">,</span> <span class="n">f_index</span><span class="p">)</span>

                <span class="c1"># yield the frame and update the progress bar</span>
                <span class="k">yield</span> <span class="n">nd2f</span><span class="o">.</span><span class="n">read_frame</span><span class="p">(</span><span class="n">f_num</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pbar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">pbar</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">f_index</span><span class="p">))</span>
                    <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="c1"># if we have ome_xml, we tell tifffile not to worry about it (ome=False)</span>
        <span class="n">tf_ome</span> <span class="o">=</span> <span class="kc">False</span> <span class="k">if</span> <span class="n">ome_xml</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="c1"># Write the tiff file</span>
        <span class="n">pixelsize</span> <span class="o">=</span> <span class="n">nd2f</span><span class="o">.</span><span class="n">voxel_size</span><span class="p">()</span><span class="o">.</span><span class="n">x</span>
        <span class="n">photometric</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">PHOTOMETRIC</span><span class="o">.</span><span class="n">RGB</span> <span class="k">if</span> <span class="n">nd2f</span><span class="o">.</span><span class="n">is_rgb</span> <span class="k">else</span> <span class="n">tf</span><span class="o">.</span><span class="n">PHOTOMETRIC</span><span class="o">.</span><span class="n">MINISBLACK</span>
        <span class="k">with</span> <span class="n">tf</span><span class="o">.</span><span class="n">TiffWriter</span><span class="p">(</span><span class="n">dest_path</span><span class="p">,</span> <span class="n">bigtiff</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ome</span><span class="o">=</span><span class="n">tf_ome</span><span class="p">)</span> <span class="k">as</span> <span class="n">tif</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_positions</span><span class="p">):</span>
                <span class="n">tif</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="nb">iter</span><span class="p">(</span><span class="n">position_iter</span><span class="p">(</span><span class="n">p</span><span class="p">)),</span>
                    <span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">,</span>
                    <span class="n">dtype</span><span class="o">=</span><span class="n">nd2f</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span>
                    <span class="n">resolution</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">pixelsize</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">pixelsize</span><span class="p">),</span>
                    <span class="n">resolutionunit</span><span class="o">=</span><span class="n">tf</span><span class="o">.</span><span class="n">RESUNIT</span><span class="o">.</span><span class="n">MICROMETER</span><span class="p">,</span>
                    <span class="n">photometric</span><span class="o">=</span><span class="n">photometric</span><span class="p">,</span>
                    <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">ome_xml</span><span class="p">,</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="n">pbar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pbar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># close the nd2 file if we opened it</span>
        <span class="k">if</span> <span class="n">close_when_done</span><span class="p">:</span>
            <span class="n">nd2f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="nd2.rescue_nd2" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">rescue_nd2</span>


<a href="#nd2.rescue_nd2" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">rescue_nd2</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="handle (nd2.rescue_nd2(handle))" href="#nd2.rescue_nd2(handle)">handle</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.BinaryIO" href="https://docs.python.org/3/library/typing.html#typing.BinaryIO">BinaryIO</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="frame_shape (nd2.rescue_nd2(frame_shape))" href="#nd2.rescue_nd2(frame_shape)">frame_shape</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n"><a class="autorefs autorefs-internal" title="dtype (nd2.rescue_nd2(dtype))" href="#nd2.rescue_nd2(dtype)">dtype</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="numpy.typing.DTypeLike" href="https://numpy.org/doc/stable/reference/typing.html#numpy.typing.DTypeLike">DTypeLike</a></span> <span class="o">=</span> <span class="s2">&quot;uint16&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="max_iters (nd2.rescue_nd2(max_iters))" href="#nd2.rescue_nd2(max_iters)">max_iters</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="verbose (nd2.rescue_nd2(verbose))" href="#nd2.rescue_nd2(verbose)">verbose</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="chunk_start (nd2.rescue_nd2(chunk_start))" href="#nd2.rescue_nd2(chunk_start)">chunk_start</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></span> <span class="o">=</span> <span class="n"><span title="nd2._parse._chunk_decode._default_chunk_start">_default_chunk_start</span></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Iterator" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator">Iterator</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Iterator that yields all discovered frames in a file handle.</p>
<p>In nd2 files, each "frame" contains XY and all channel info (both true
channels as well as RGB components).  Frames are laid out as (Y, X, C),
and the <code>frame_shape</code> should match the expected frame size.  If
<code>frame_shape</code> is not provided, a guess will be made about the vector shape
of each frame, but it may be incorrect.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="nd2.rescue_nd2(handle)" class="doc doc-heading doc-heading-parameter">              <b><code>handle</code></b>
<a href="#nd2.rescue_nd2(handle)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="typing.BinaryIO" href="https://docs.python.org/3/library/typing.html#typing.BinaryIO">BinaryIO</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>Filepath string, or binary file handle (For example
<code>handle = open('some.nd2', 'rb')</code>)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.rescue_nd2(frame_shape)" class="doc doc-heading doc-heading-parameter">              <b><code>frame_shape</code></b>
<a href="#nd2.rescue_nd2(frame_shape)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><span title="Tuple">Tuple</span>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, ...]</code>, default:
                  <code>()</code>
)
          –
          <div class="doc-md-description">
            <p>expected shape of each frame, by default a 1 dimensional array will
be yielded for each frame, which can be reshaped later if desired.
NOTE: nd2 frames are generally ordered as
(height, width, true_channels, rgbcomponents).
So unlike numpy, which would use (channels, Y, X), you should use
(Y, X, channels)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.rescue_nd2(dtype)" class="doc doc-heading doc-heading-parameter">              <b><code>dtype</code></b>
<a href="#nd2.rescue_nd2(dtype)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="numpy.dtype" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype">dtype</a></code>, default:
                  <code>&#39;uint16&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>Data type, by default np.uint16</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.rescue_nd2(max_iters)" class="doc doc-heading doc-heading-parameter">              <b><code>max_iters</code></b>
<a href="#nd2.rescue_nd2(max_iters)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><span title="Optional">Optional</span>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A maximum number of frames to yield, by default will yield until the
end of the file is reached</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.rescue_nd2(verbose)" class="doc doc-heading doc-heading-parameter">              <b><code>verbose</code></b>
<a href="#nd2.rescue_nd2(verbose)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>whether to print info</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="nd2.rescue_nd2(chunk_start)" class="doc doc-heading doc-heading-parameter">              <b><code>chunk_start</code></b>
<a href="#nd2.rescue_nd2(chunk_start)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></code>, default:
                  <code><span title="nd2._parse._chunk_decode._default_chunk_start">_default_chunk_start</span></code>
)
          –
          <div class="doc-md-description">
            <p>The bytes that start each chunk, by default 0x0ABECEDA.to_bytes(4, "little")</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Yields:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>
          –
          <div class="doc-md-description">
            <p>each discovered frame in the file</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;some_bad.nd2&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">frames</span> <span class="o">=</span> <span class="n">rescue_nd2</span><span class="p">(</span><span class="n">fh</span><span class="p">,</span> <span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s1">&#39;uint16&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">ary</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span>
</code></pre></div>
    <p>You will likely want to reshape <code>ary</code> after that.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/nd2/_parse/_chunk_decode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">rescue_nd2</span><span class="p">(</span>
    <span class="n">handle</span><span class="p">:</span> <span class="n">BinaryIO</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">frame_shape</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">dtype</span><span class="p">:</span> <span class="n">DTypeLike</span> <span class="o">=</span> <span class="s2">&quot;uint16&quot;</span><span class="p">,</span>
    <span class="n">max_iters</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">chunk_start</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="n">_default_chunk_start</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterator that yields all discovered frames in a file handle.</span>

<span class="sd">    In nd2 files, each &quot;frame&quot; contains XY and all channel info (both true</span>
<span class="sd">    channels as well as RGB components).  Frames are laid out as (Y, X, C),</span>
<span class="sd">    and the `frame_shape` should match the expected frame size.  If</span>
<span class="sd">    `frame_shape` is not provided, a guess will be made about the vector shape</span>
<span class="sd">    of each frame, but it may be incorrect.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    handle : BinaryIO | str</span>
<span class="sd">        Filepath string, or binary file handle (For example</span>
<span class="sd">        `handle = open(&#39;some.nd2&#39;, &#39;rb&#39;)`)</span>
<span class="sd">    frame_shape : Tuple[int, ...], optional</span>
<span class="sd">        expected shape of each frame, by default a 1 dimensional array will</span>
<span class="sd">        be yielded for each frame, which can be reshaped later if desired.</span>
<span class="sd">        NOTE: nd2 frames are generally ordered as</span>
<span class="sd">        (height, width, true_channels, rgbcomponents).</span>
<span class="sd">        So unlike numpy, which would use (channels, Y, X), you should use</span>
<span class="sd">        (Y, X, channels)</span>
<span class="sd">    dtype : np.dtype, optional</span>
<span class="sd">        Data type, by default np.uint16</span>
<span class="sd">    max_iters : Optional[int], optional</span>
<span class="sd">        A maximum number of frames to yield, by default will yield until the</span>
<span class="sd">        end of the file is reached</span>
<span class="sd">    verbose : bool</span>
<span class="sd">        whether to print info</span>
<span class="sd">    chunk_start : bytes, optional</span>
<span class="sd">        The bytes that start each chunk, by default 0x0ABECEDA.to_bytes(4, &quot;little&quot;)</span>

<span class="sd">    Yields</span>
<span class="sd">    ------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        each discovered frame in the file</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; with open(&#39;some_bad.nd2&#39;, &#39;rb&#39;) as fh:</span>
<span class="sd">    &gt;&gt;&gt;     frames = rescue_nd2(fh, (512, 512, 4), &#39;uint16&#39;)</span>
<span class="sd">    &gt;&gt;&gt;     ary = np.stack(frames)</span>

<span class="sd">    You will likely want to reshape `ary` after that.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">ensure_handle</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span> <span class="k">as</span> <span class="n">_fh</span><span class="p">:</span>
        <span class="n">mm</span> <span class="o">=</span> <span class="n">mmap</span><span class="o">.</span><span class="n">mmap</span><span class="p">(</span><span class="n">_fh</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="n">mmap</span><span class="o">.</span><span class="n">ACCESS_READ</span><span class="p">)</span>

        <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">iters</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="c1"># search for the next part of the file starting with CHUNK_START</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="n">mm</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">chunk_start</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;End of file.&quot;</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="c1"># location at the end of the chunk header</span>
            <span class="n">end_hdr</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">CHUNK_HEADER</span><span class="o">.</span><span class="n">size</span>

            <span class="c1"># find the next &quot;!&quot;</span>
            <span class="c1"># In nd2 files, each data chunk starts with the</span>
            <span class="c1"># string &quot;ImageDataSeq|N&quot; ... where N is the frame index</span>
            <span class="n">next_bang</span> <span class="o">=</span> <span class="n">mm</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;!&quot;</span><span class="p">,</span> <span class="n">end_hdr</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">next_bang</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;</span> <span class="n">next_bang</span> <span class="o">-</span> <span class="n">end_hdr</span> <span class="o">&lt;</span> <span class="mi">128</span><span class="p">):</span>
                <span class="c1"># if we find the &quot;!&quot;... make sure we have an ImageDataSeq</span>
                <span class="n">chunk_name</span> <span class="o">=</span> <span class="n">mm</span><span class="p">[</span><span class="n">end_hdr</span><span class="p">:</span><span class="n">next_bang</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">chunk_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;ImageDataSeq|&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found image </span><span class="si">{</span><span class="n">iters</span><span class="si">}</span><span class="s2"> at offset </span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="c1"># Now, read the actual data</span>
                    <span class="n">_</span><span class="p">,</span> <span class="n">shift</span><span class="p">,</span> <span class="n">length</span> <span class="o">=</span> <span class="n">CHUNK_HEADER</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">mm</span><span class="p">[</span><span class="n">offset</span><span class="p">:</span><span class="n">end_hdr</span><span class="p">])</span>
                    <span class="c1"># convert to numpy array and yield</span>
                    <span class="c1"># (can&#39;t remember why the extra 8 bytes)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">shape</span> <span class="o">=</span> <span class="n">frame_shape</span> <span class="ow">or</span> <span class="p">((</span><span class="n">length</span> <span class="o">-</span> <span class="mi">8</span><span class="p">)</span> <span class="o">//</span> <span class="n">dtype</span><span class="o">.</span><span class="n">itemsize</span><span class="p">,)</span>
                        <span class="k">yield</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">(</span>
                            <span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">,</span>
                            <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span>
                            <span class="n">buffer</span><span class="o">=</span><span class="n">mm</span><span class="p">,</span>
                            <span class="n">offset</span><span class="o">=</span><span class="n">end_hdr</span> <span class="o">+</span> <span class="n">shift</span> <span class="o">+</span> <span class="mi">8</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                        <span class="c1"># buffer is likely too small</span>
                        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error at offset </span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">iters</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found chunk at offset </span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s2"> with no image data&quot;</span><span class="p">)</span>

            <span class="n">offset</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">max_iters</span> <span class="ow">and</span> <span class="n">iters</span> <span class="o">&gt;=</span> <span class="n">max_iters</span><span class="p">:</span>
                <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Talley Lambert &copy; 2021
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.sections", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>